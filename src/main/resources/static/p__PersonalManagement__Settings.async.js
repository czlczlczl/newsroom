(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{"/idP":function(e,a,t){"use strict";t.r(a);t("+L6B");var n,i,r,o,s=t("2/Rp"),l=(t("5NDa"),t("5rEg")),c=(t("miYZ"),t("tsqr")),u=(t("OaEy"),t("2fM7")),m=t("2Taf"),d=t.n(m),f=t("vZ4D"),p=t.n(f),h=t("l4Ni"),v=t.n(h),E=t("ujKo"),g=t.n(E),y=t("MhPg"),b=t.n(y),I=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),S=t.n(k),q=t("MuoO"),L=t("dPBl"),D=t("34ay"),O=t("OCLO"),V=t.n(O),w="personalInfo",j="academicSection",M=function(e){var a=e[w].information,t=e[j].list;return{academicSec:t,currentUserInfo:a}},A=(n=Object(q["connect"])(M,null),i=I["a"].create(),n(r=i((o=function(e){function a(e){var t;return d()(this,a),t=v()(this,g()(a).call(this,e)),t.generateAcademicSec=function(){if(!t.props.academicSec)return null;for(var e=[],a=0;a<t.props.academicSec.length;a++)e.push(S.a.createElement(u["a"].Option,{value:t.props.academicSec[a].id},t.props.academicSec[a].academicsec));return e},t.checkAcademicSec2=function(e,a,n){a&&a===t.props.form.getFieldValue("academicsec1")&&n("\u8bf7\u4e0d\u8981\u9009\u62e9\u76f8\u540c\u7684\u5b66\u672f\u5206\u533a"),n()},t.checkAcademicSec3=function(e,a,n){!a||a!==t.props.form.getFieldValue("academicsec1")&&a!==t.props.form.getFieldValue("academicsec2")||n("\u8bf7\u4e0d\u8981\u9009\u62e9\u76f8\u540c\u7684\u5b66\u672f\u5206\u533a"),n()},t.handleSubmitAuthor=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.researchdir=a.researchdir,n.academicsec1=a.academicsec1,n.academicsec2=a.academicsec2?a.academicsec2:null,n.academicsec3=a.academicsec3?a.academicsec3:null,t.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.handleSubmitReferee=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.academicsec1=a.academicsec1,n.academicsec2=a.academicsec2?a.academicsec2:null,n.academicsec3=a.academicsec3?a.academicsec3:null,t.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.state={information:void 0},t}return b()(a,e),p()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(a){1===a.result&&e.setState({information:a.information})}}),this.props.dispatch({type:"".concat(j,"/queryList")})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator;if("author"==Object(D["a"])()[0]){var t=this.state.information?this.state.information.researchdir:null,n=this.state.information?this.state.information.academicsec1:null,i=this.state.information&&this.state.information.academicsec2?this.state.information.academicsec2:null,r=this.state.information&&this.state.information.academicsec3?this.state.information.academicsec3:null;return S.a.createElement("div",{className:V.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7814\u7a76\u65b9\u5411"},a("researchdir",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7814\u7a76\u65b9\u5411"},{max:100,message:"\u6700\u591a\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7814\u7a76\u65b9\u5411"}))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a1"},a("academicsec1",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u503e\u5411\u6295\u7a3f\u7684\u5b66\u672f\u5206\u533a"}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a2"},a("academicsec2",{initialValue:i,rules:[{validator:this.checkAcademicSec2}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a3"},a("academicsec3",{initialValue:r,rules:[{validator:this.checkAcademicSec3}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitAuthor},"\u66f4\u65b0"))))}if("referee"==Object(D["a"])()[0]){var o=this.state.information?this.state.information.academicsec1:null,c=this.state.information&&this.state.information.academicsec2?this.state.information.academicsec2:null,m=this.state.information&&this.state.information.academicsec3?this.state.information.academicsec3:null;return S.a.createElement("div",{className:V.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a1"},a("academicsec1",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u503e\u5411\u6295\u7a3f\u7684\u5b66\u672f\u5206\u533a"}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a2"},a("academicsec2",{initialValue:c,rules:[{validator:this.checkAcademicSec2}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a3"},a("academicsec3",{initialValue:m,rules:[{validator:this.checkAcademicSec3}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitReferee},"\u66f4\u65b0"))))}return S.a.createElement(L["a"],{to:"/account/profile"})}}]),a}(S.a.Component),r=o))||r)||r);a["default"]=A},"4atb":function(e,a,t){"use strict";t.r(a);t("2qtc");var n,i,r,o,s=t("kLXV"),l=(t("/zsF"),t("PArb")),c=(t("+L6B"),t("2/Rp")),u=(t("miYZ"),t("tsqr")),m=t("p0pE"),d=t.n(m),f=(t("5NDa"),t("5rEg")),p=t("2Taf"),h=t.n(p),v=t("vZ4D"),E=t.n(v),g=t("l4Ni"),y=t.n(g),b=t("ujKo"),I=t.n(b),k=t("MhPg"),S=t.n(k),q=(t("y8nQ"),t("Vl3Y")),L=t("q1tI"),D=t.n(L),O=t("MuoO"),V=t("dPBl"),w=t("34ay"),j=t("OCLO"),M=t.n(j),A="personalInfo",N="modifyPwSafeQue",C=function(e){var a=e[N],t=e[A].information;return{currentUserInfo:t,safeQuestion:a}},F=(n=Object(O["connect"])(C,null),i=q["a"].create(),n(r=i((o=function(e){function a(e){var t;return h()(this,a),t=y()(this,I()(a).call(this,e)),t.renderBank=function(){return t.state.information?t.state.isConfirmed?D.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"},t.props.form.getFieldDecorator("bank",{initialValue:t.state.information.bank,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"}]})(D.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"}))):D.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"},"******"):D.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"})},t.renderCard=function(){return t.state.information?t.state.isConfirmed?D.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"},t.props.form.getFieldDecorator("card",{initialValue:t.state.information.card,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u94f6\u884c\u5361\u8d26\u53f7"},{len:16,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u94f6\u884c\u5361\u8d26\u53f7"}]})(D.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u5361\u8d26\u53f7"}))):D.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"},"*****************"):D.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"})},t.handleSafeQue=function(e){e.preventDefault(),t.setState(d()({},t.state,{modalIsVisable:!0}))},t.handleOk=function(e){if(e.preventDefault(),t.state.safeQueA1&&t.state.safeQueA2&&t.state.safeQueA3){var a={answer1:t.state.safeQueA1,answer2:t.state.safeQueA2,answer3:t.state.safeQueA3,username:t.state.information.username,role:4};t.props.dispatch({type:"".concat(N,"/verifySafeAnswers"),payload:a,callback:function(e){1!=e?u["a"].error("\u5bc6\u4fdd\u95ee\u9898\u9519\u8bef"):t.setState(d()({},t.state,{isConfirmed:!0,modalIsVisable:!1}))}})}else u["a"].error("\u8bf7\u5b8c\u6574\u56de\u7b54\u5b89\u5168\u95ee\u9898")},t.handleCancel=function(e){e.preventDefault(),t.setState(d()({},t.state,{modalIsVisable:!1}))},t.state={information:void 0,isConfirmed:!1,modalIsVisable:!1,safeQueA1:void 0,safeQueA2:void 0,safeQueA3:void 0},t}return S()(a,e),E()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(A,"/queryPersonalInfo"),callback:function(a){if(1===a.result){e.setState(d()({},e.state,{information:a.information}));var t={username:a.information.username,role:4};e.props.dispatch({type:"".concat(N,"/querySafeQuestion"),payload:t})}}})}},{key:"render",value:function(){var e=this;return"referee"!=Object(w["a"])()[0]?D.a.createElement(V["a"],{to:"/account/profile"}):D.a.createElement("div",{className:M.a.info,ref:function(a){return e.view=a}},D.a.createElement("div",{className:M.a.left},D.a.createElement(q["a"],{layout:"vertical",hideRequiredMark:!0},this.renderBank(),this.renderCard(),D.a.createElement(c["a"],{type:"primary",onClick:this.handleSubmit},"\u66f4\u65b0"),"\xa0",D.a.createElement(c["a"],{onClick:this.handleSafeQue},"\u5b89\u5168\u95ee\u9898"))),D.a.createElement(s["a"],{title:"\u9a8c\u8bc1\u5b89\u5168\u95ee\u9898",visible:this.state.modalIsVisable,onOk:this.handleOk,onCancel:this.handleCancel},D.a.createElement("div",{style:{marginTop:16,marginLeft:16,marginRight:16,marginBottom:16}},"\u5b89\u5168\u95ee\u98981\uff1a",this.props.safeQuestion?this.props.safeQuestion.que1:null," ",D.a.createElement("br",null),"\u5b89\u5168\u7b54\u68481\uff1a",D.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98981",onChange:function(a){a.preventDefault(),e.setState(d()({},e.state,{safeQueA1:a.target.value}))}}),D.a.createElement(l["a"],null),"\u5b89\u5168\u95ee\u98982\uff1a",this.props.safeQuestion?this.props.safeQuestion.que2:null," ",D.a.createElement("br",null),"\u5b89\u5168\u7b54\u68482\uff1a",D.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98982",onChange:function(a){a.preventDefault(),e.setState(d()({},e.state,{safeQueA2:a.target.value}))}}),D.a.createElement(l["a"],null),"\u5b89\u5168\u95ee\u98983\uff1a",this.props.safeQuestion?this.props.safeQuestion.que3:null," ",D.a.createElement("br",null),"\u5b89\u5168\u7b54\u68483\uff1a",D.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98983",onChange:function(a){a.preventDefault(),e.setState(d()({},e.state,{safeQueA3:a.target.value}))}}))))}}]),a}(D.a.Component),r=o))||r)||r);a["default"]=F},FYcS:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,i,r,o,s=t("2/Rp"),l=(t("5NDa"),t("5rEg")),c=(t("miYZ"),t("tsqr")),u=(t("OaEy"),t("2fM7")),m=t("2Taf"),d=t.n(m),f=t("vZ4D"),p=t.n(f),h=t("l4Ni"),v=t.n(h),E=t("ujKo"),g=t.n(E),y=t("MhPg"),b=t.n(y),I=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),S=t.n(k),q=t("MuoO"),L=t("dPBl"),D=t("34ay"),O=t("OCLO"),V=t.n(O),w="personalInfo",j="majorInfo",M="educationInfo",A="academicSection",N=function(e){var a=e[w].information,t=e[j].majorList,n=e[M].educationList,i=e[A].list;return{academicSec:i,currentUserInfo:a,educationList:n,majorList:t}},C=(n=Object(q["connect"])(N,null),i=I["a"].create(),n(r=i((o=function(e){function a(e){var t;return d()(this,a),t=v()(this,g()(a).call(this,e)),t.generateMajorList=function(){if(!t.props.majorList)return null;for(var e=[],a=0;a<t.props.majorList.length;a++)e.push(S.a.createElement(u["a"].Option,{value:t.props.majorList[a].id},t.props.majorList[a].major));return e},t.generateEducationList=function(){if(!t.props.educationList)return null;for(var e=[],a=0;a<t.props.educationList.length;a++)e.push(S.a.createElement(u["a"].Option,{value:t.props.educationList[a].id},t.props.educationList[a].education));return e},t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.major=a.major,n.education=a.education,n.title=a.title,n.officetel=a.officetel,t.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.state={information:void 0},t}return b()(a,e),p()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(a){1===a.result&&e.setState({information:a.information})}}),this.props.dispatch({type:"".concat(A,"/queryList")}),this.props.dispatch({type:"".concat(M,"/queryEducationList")}),this.props.dispatch({type:"".concat(j,"/queryMajorList")})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t=this.state.information?this.state.information.major:null,n=this.state.information?this.state.information.education:null,i=this.state.information?this.state.information.title:null,r=this.state.information?this.state.information.officetel:null;return"author"!=Object(D["a"])()[0]?S.a.createElement(L["a"],{to:"/account/profile"}):S.a.createElement("div",{className:V.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u4e13\u4e1a\u4fe1\u606f"},a("major",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u7684\u4e13\u4e1a"}]})(S.a.createElement(u["a"],null,this.generateMajorList()))),S.a.createElement(I["a"].Item,{label:"\u6559\u80b2\u4fe1\u606f"},a("education",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u7684\u6559\u80b2\u4fe1\u606f"}]})(S.a.createElement(u["a"],null,this.generateEducationList()))),S.a.createElement(I["a"].Item,{label:"\u5934\u8854"},a("title",{initialValue:i,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5934\u8854"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u5934\u8854"}))),S.a.createElement(I["a"].Item,{label:"\u529e\u516c\u5ba4\u7535\u8bdd"},a("officetel",{initialValue:r,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u8981\u6c42\u7684\u7535\u8bdd"}]})(S.a.createElement(l["a"],{placeholder:"\u529e\u516c\u5ba4\u7535\u8bdd\uff08\u8bf7\u5c06\u533a\u53f7\u548c\u7535\u8bdd\u4e00\u8d77\u8f93\u5165\uff0c\u65e0\u5206\u9694\u7b26\uff09"}))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmit},"\u66f4\u65b0"))))}}]),a}(S.a.Component),r=o))||r)||r);a["default"]=C},JhtZ:function(e,a,t){"use strict";t.r(a);var n=t("2Taf"),i=t.n(n),r=t("vZ4D"),o=t.n(r),s=t("l4Ni"),l=t.n(s),c=t("ujKo"),u=t.n(c),m=t("MhPg"),d=t.n(m),f=(t("lUTK"),t("BvKs")),p=t("q1tI"),h=t.n(p),v=t("usdK"),E=t("34ay"),g=t("v99g"),y=t("SK0R"),b=t.n(y),I=f["a"].Item,k=function(e){function a(e){var t;i()(this,a),t=l()(this,u()(a).call(this,e)),t.getmenu=function(){var e=t.state.menuMap;return Object.keys(e).map(function(a){return h.a.createElement(I,{key:a},e[a])})},t.getRightTitle=function(){var e=t.state,a=e.selectKey,n=e.menuMap;return n[a]},t.selectKey=function(e){var a=e.key;v["a"].push("/account/profile/".concat(a)),t.setState({selectKey:a})},t.resize=function(){t.main&&requestAnimationFrame(function(){var e="inline",a=t.main.offsetWidth;t.main.offsetWidth<641&&a>400&&(e="horizontal"),window.innerWidth<768&&a>400&&(e="horizontal"),t.setState({mode:e})})};var n={},r=e.match,o=e.location;"author"==Object(E["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f",address:"\u5730\u5740\u4fe1\u606f",education:"\u6559\u80b2\u4fe1\u606f",academic:"\u5b66\u672f\u4fe1\u606f"}),"editor"==Object(E["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f"}),"referee"==Object(E["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f",address:"\u5730\u5740\u4fe1\u606f",academic:"\u5b66\u672f\u4fe1\u606f",bank:"\u94f6\u884c\u5361\u4fe1\u606f"});var s=o.pathname.replace("".concat(r.path,"/"),"");return t.state={menuMap:n,mode:"inline",selectKey:n[s]?s:"info"},t}return d()(a,e),o()(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this,a=this.props.children,t=this.state,n=t.mode,i=t.selectKey;return h.a.createElement(g["a"],null,h.a.createElement("div",{className:b.a.main,ref:function(a){e.main=a}},h.a.createElement("div",{className:b.a.leftmenu},h.a.createElement(f["a"],{mode:n,selectedKeys:[i],onClick:this.selectKey},this.getmenu())),h.a.createElement("div",{className:b.a.right},h.a.createElement("div",{className:b.a.title},this.getRightTitle()),a)))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.match,n=e.location,i=n.pathname.replace("".concat(t.path,"/"),"");return i=a.menuMap[i]?i:"info",i!==a.selectKey?{selectKey:i}:null}}]),a}(h.a.Component);a["default"]=k},OCLO:function(e,a,t){e.exports={info:"antd-pro-pages-personal-management-settings-info-info",left:"antd-pro-pages-personal-management-settings-info-left",right:"antd-pro-pages-personal-management-settings-info-right",avatar_title:"antd-pro-pages-personal-management-settings-info-avatar_title",avatar:"antd-pro-pages-personal-management-settings-info-avatar",button_view:"antd-pro-pages-personal-management-settings-info-button_view"}},SK0R:function(e,a,t){e.exports={main:"antd-pro-pages-personal-management-settings-index-main",leftmenu:"antd-pro-pages-personal-management-settings-index-leftmenu",right:"antd-pro-pages-personal-management-settings-index-right",title:"antd-pro-pages-personal-management-settings-index-title"}},TVoW:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,i,r,o,s=t("2/Rp"),l=(t("7Kak"),t("9yH6")),c=(t("5NDa"),t("5rEg")),u=(t("miYZ"),t("tsqr")),m=t("2Taf"),d=t.n(m),f=t("vZ4D"),p=t.n(f),h=t("l4Ni"),v=t.n(h),E=t("ujKo"),g=t.n(E),y=t("MhPg"),b=t.n(y),I=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),S=t.n(k),q=t("MuoO"),L=t("34ay"),D=t("OCLO"),O=t.n(D),V="personalInfo",w=function(e){var a=e[V].information;return{currentUserInfo:a}},j=(n=Object(q["connect"])(w,null),i=I["a"].create(),n(r=i((o=function(e){function a(e){var t;return d()(this,a),t=v()(this,g()(a).call(this,e)),t.handleSubmitAuthor=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.name=a.name,n.name_pinyin=a.name_pinyin,n.gender=a.gender,n.phonenum=a.phonenum,n.introduction=a.introduction,t.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.handleSubmitEditor=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.name=a.name,n.gender=a.gender,t.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.handleSubmitReferee=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.name=a.name,n.gender=a.gender,t.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.state={information:void 0},t}return b()(a,e),p()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(V,"/queryPersonalInfo"),callback:function(a){1===a.result&&e.setState({information:a.information})}})}},{key:"render",value:function(){var e=this;if("author"==Object(L["a"])()[0]){var a=this.state.information?this.state.information.name:null,t=this.state.information?this.state.information.name_pinyin:null,n=this.state.information?this.state.information.gender:null,i=this.state.information?this.state.information.phonenum:null,r=this.state.information?this.state.information.introduction:null;return S.a.createElement("div",{className:O.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:O.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitAuthor,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.email:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d\uff08\u62fc\u97f3\uff09"},this.props.form.getFieldDecorator("name_pinyin",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d\u7684\u62fc\u97f3"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d\uff08\u62fc\u97f3\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(I["a"].Item,{label:"\u624b\u673a"},this.props.form.getFieldDecorator("phonenum",{initialValue:i,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u624b\u673a\u53f7"},{len:11,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u624b\u673a\u53f7"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),S.a.createElement(I["a"].Item,{label:"\u4ecb\u7ecd"},this.props.form.getFieldDecorator("introduction",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4ecb\u7ecd\u4fe1\u606f"},{max:300,message:"\u8bf7\u63a7\u5236\u5728300\u4e2a\u5b57\u7b26\u4ee5\u5185"}]})(S.a.createElement(c["a"].TextArea,{row:4,placeholder:"\u8bf7\u586b\u5199\u4ecb\u7ecd\u4fe1\u606f"}))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}if("editor"==Object(L["a"])()[0]){var o=this.state.information?this.state.information.name:null,u=this.state.information?this.state.information.gender:null;return S.a.createElement("div",{className:O.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:O.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitEditor,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.username:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}if("referee"==Object(L["a"])()[0]){var m=this.state.information?this.state.information.name:null,d=this.state.information?this.state.information.gender:null;return S.a.createElement("div",{className:O.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:O.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitReferee,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.username:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:m,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}}}]),a}(S.a.Component),r=o))||r)||r);a["default"]=j},x3fv:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,i,r,o,s=t("2/Rp"),l=(t("5NDa"),t("5rEg")),c=(t("OaEy"),t("2fM7")),u=(t("miYZ"),t("tsqr")),m=t("2Taf"),d=t.n(m),f=t("vZ4D"),p=t.n(f),h=t("l4Ni"),v=t.n(h),E=t("ujKo"),g=t.n(E),y=t("MhPg"),b=t.n(y),I=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),S=t.n(k),q=t("MuoO"),L=t("dPBl"),D=t("34ay"),O=t("OCLO"),V=t.n(O),w="personalInfo",j="locationInfo",M=function(e){var a=e[w].information,t=e[j].locationList;return{currentUserInfo:a,locationList:t}},A=(n=Object(q["connect"])(M,null),i=I["a"].create(),n(r=i((o=function(e){function a(e){var t;return d()(this,a),t=v()(this,g()(a).call(this,e)),t.handleSubmitAuthor=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.address=a.address,n.postcode=a.postcode,n.workspace_cn=a.workspace_cn,n.workspace_en=a.workspace_en,n.location=a.location,t.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.handleSubmitReferee=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props.currentUserInfo;n.address=a.address,t.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},t.state={information:void 0},t}return b()(a,e),p()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(a){1===a.result&&e.setState({information:a.information})}}),this.props.dispatch({type:"".concat(j,"/queryLocationList")})}},{key:"generateLocationList",value:function(){if(!this.props.locationList)return null;for(var e=[],a=0;a<this.props.locationList.length;a++)e.push(S.a.createElement(c["a"].Option,{value:this.props.locationList[a].id},this.props.locationList[a].location));return e}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator;if("author"==Object(D["a"])()[0]){var t=this.state.information?this.state.information.address:null,n=this.state.information?this.state.information.postcode:null,i=this.state.information?this.state.information.workspace_cn:null,r=this.state.information?this.state.information.workspace_en:null,o=this.state.information?this.state.information.location:null;return S.a.createElement("div",{className:V.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u8054\u7cfb\u5730\u5740"},a("address",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}))),S.a.createElement(I["a"].Item,{label:"\u90ae\u653f\u7f16\u7801"},a("postcode",{initialValue:n,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u90ae\u653f\u7f16\u7801"},{len:6,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u90ae\u653f\u7f16\u7801"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u653f\u7f16\u7801"}))),S.a.createElement(I["a"].Item,{label:"\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"},a("workspace_cn",{initialValue:i,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"},a("workspace_en",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u5730\u70b9"},a("location",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u70b9\u4fe1\u606f"}]})(S.a.createElement(c["a"],null,this.generateLocationList()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitAuthor},"\u66f4\u65b0"))))}if("referee"==Object(D["a"])()[0]){var u=this.state.information?this.state.information.address:null;return S.a.createElement("div",{className:V.a.info,ref:function(a){return e.view=a}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u8054\u7cfb\u5730\u5740"},a("address",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitReferee},"\u66f4\u65b0"))))}return S.a.createElement(L["a"],{to:"/account/profile"})}}]),a}(S.a.Component),r=o))||r)||r);a["default"]=A}}]);