(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{"EkF/":function(e,t,a){"use strict";a.r(t);a("+L6B");var r,s,o,n,l=a("2/Rp"),i=a("jehZ"),c=a.n(i),p=(a("Q9mQ"),a("diRs")),d=(a("5NDa"),a("5rEg")),m=(a("miYZ"),a("tsqr")),u=(a("MXD1"),a("CFYs")),h=a("2Taf"),f=a.n(h),g=a("vZ4D"),v=a.n(g),w=a("l4Ni"),E=a.n(w),y=a("ujKo"),P=a.n(y),k=a("MhPg"),S=a.n(k),b=(a("y8nQ"),a("Vl3Y")),C=a("q1tI"),F=a.n(C),N=a("MuoO"),x=a("dPBl"),D=a("usdK"),A=a("RmQQ"),L=a.n(A),Q="forgetPassword",I=function(e){var t=e[Q].isExist,a=e[Q].validateSA,r=e[Q];return{isExist:t,stateContent:r,validateSA:a}},R={labelCol:{span:5},wrapperCol:{span:19}},T={good:F.a.createElement("div",{className:L.a.success},"\u5f3a\u5ea6\uff1a\u5f3a"),ok:F.a.createElement("div",{className:L.a.warning},"\u5f3a\u5ea6\uff1a\u4e2d"),poor:F.a.createElement("div",{className:L.a.error},"\u5f3a\u5ea6\uff1a\u5f31")},V={good:"success",ok:"normal",poor:"exception"},Z=(r=Object(N["connect"])(I,null),s=b["a"].create(),r(o=s((n=function(e){function t(e){var a;return f()(this,t),a=E()(this,P()(t).call(this,e)),a.getPasswordStrengthLevel=function(){var e=a.props.form.getFieldValue("password"),t=/^\w*[A-Z]+\w*/,r=/^\w+/;return e&&e.length>15&&t.test(e)?"good":e&&e.length>=10&&r.test(e)?"ok":"poor"},a.checkPassword=function(e,t,r){if(t?a.setState({visable:!!t}):(a.setState({help:"\u8bf7\u8f93\u5165\u65b0\u7684\u5bc6\u7801",visable:!!t}),r("\u8bf7\u8f93\u5165\u5bc6\u7801")),t.length<10)r("\u5bc6\u7801\u957f\u5ea6\u8bf7\u5927\u4e8e\u7b49\u4e8e10\u4f4d");else{var s=a.props.form;t&&a.state.confirmDirty&&s.validateFields(["confirm"],{force:!0}),r()}},a.getProgressPercent=function(e){var t=V[a.getPasswordStrengthLevel()];return"exception"==t?20:"normal"==t?60:"success"==t?100:0},a.renderPasswordStrength=function(){var e=a.props.form,t=e.getFieldValue("password"),r=a.getPasswordStrengthLevel();return t&&t.length?F.a.createElement("div",{className:L.a["progress-".concat(r)]},F.a.createElement(u["a"],{status:V[r],className:L.a.progress,strokeWidth:6,percent:a.getProgressPercent(t),showInfo:!1})):null},a.checkConfirm=function(e,t,r){t&&t!==a.props.form.getFieldValue("password")?r("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"):r()},a.state={confirmDirty:!1,visable:!1,help:""},a}return S()(t,e),v()(t,[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,r=t.validateFields,s=function(){r(function(t,a){if(!t){var r=a.password,s={username:e.props.stateContent.email,password:r,role:e.props.stateContent.role};e.props.dispatch({type:"".concat(Q,"/uploadPwResetData"),payload:s,callback:function(e){1!=e?m["a"].error("\u901a\u8baf\u9519\u8bef"):D["a"].push("/user/forgetpassword/result")}})}})};return"undefined"==typeof this.props.isExist||"undefined"==typeof this.props.validateSA||1!=this.props.isExist||1!=this.props.validateSA?F.a.createElement(x["a"],{to:"/user/forgetpassword"}):F.a.createElement(b["a"],{layout:"horizontal",className:L.a.stepForm},F.a.createElement(b["a"].Item,c()({},R,{className:L.a.stepFormText,label:"\u8bf7\u8f93\u5165\u65b0\u7684\u5bc6\u7801"}),F.a.createElement(p["a"],{getPopupContainer:function(e){return e.parentNode},content:F.a.createElement("div",{style:{padding:"4px 0"}},T[this.getPasswordStrengthLevel()],this.renderPasswordStrength(),F.a.createElement("div",{style:{marginTop:10}},"\u8bf7\u8f93\u5165\u81f3\u5c1110\u4e2a\u5b57\u7b26\u7684\u5bc6\u7801\uff0c\u5305\u62ec\u5b57\u6bcd\u548c\u6570\u5b57\uff0c\u5efa\u8bae\u5305\u542b\u5927\u5199\u5b57\u6bcd\u3002")),overlayStyle:{width:240},placement:"right",visible:this.state.visable},a("password",{rules:[{validator:this.checkPassword}]})(F.a.createElement(d["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})))),F.a.createElement(b["a"].Item,c()({},R,{className:L.a.stepFormText,label:"\u8bf7\u518d\u8f93\u5165\u4e00\u6b21"}),a("confirm",{rules:[{required:!0,message:"\u9700\u8981\u518d\u8f93\u5165\u4e00\u6b21\u65b0\u5bc6\u7801"},{validator:this.checkConfirm}]})(F.a.createElement(d["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"}))),F.a.createElement(l["a"],{type:"primary",onClick:s},"\u63d0\u4ea4"))}}]),t}(F.a.Component),o=n))||o)||o);t["default"]=Z}}]);