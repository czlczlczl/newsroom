(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{CE2V:function(e,t,a){"use strict";a.r(t);var n,r,i,s,o,c,l,p,u,m,d,f,h,v,k,y,E,g,b,S,O,C,T,j,D,F,w,L,I,N,_,J,x,U=a("eHn4"),P=a.n(U),A=(a("FJo9"),a("L41K")),q=(a("IzEo"),a("bx4M")),R=(a("14J3"),a("BMrR")),z=(a("jCWc"),a("kPKH")),M=(a("OaEy"),a("2fM7")),B=(a("5NDa"),a("5rEg")),W=(a("+L6B"),a("2/Rp")),H=(a("2qtc"),a("kLXV")),V=(a("miYZ"),a("tsqr")),K=a("2Taf"),Y=a.n(K),Z=a("vZ4D"),$=a.n(Z),Q=a("l4Ni"),X=a.n(Q),G=a("ujKo"),ee=a.n(G),te=a("MhPg"),ae=a.n(te),ne=(a("y8nQ"),a("Vl3Y")),re=a("q1tI"),ie=a.n(re),se=a("MuoO"),oe=a("wd/R"),ce=a.n(oe),le=a("usdK"),pe=a("+kNj"),ue=a("Yaqk"),me=a("zHco"),de=a("Hs2e"),fe=a.n(de),he="academicSection",ve="editorDetailPublicStorage",ke=function(e){var t=e[ve].task,a=e[ve].article,n=e[he].list,r=e[ve].step,i=e[ve].invoice;return{academicSec:n,article:a,invoice:i,step:r,task:t}},ye={labelCol:{span:5},wrapperCol:{span:19}},Ee=(n=ne["a"].create(),n((i=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.pass=function(e){e.preventDefault();var t=a.props.task,n={};n.task=t,fetch("/contribute/task/judge",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})},a.fail=function(e){e.preventDefault();var t=a.props.task;t.stat=2;var n={task:t};fetch("/task/judge",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],{layout:"inline"},ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u901a\u8fc7",content:"\u662f\u5426\u786e\u8ba4\u901a\u8fc7",onOk:function(){this.pass()}})}},"\u901a\u8fc7"),ie.a.createElement(W["a"],{type:"danger",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u62d2\u7edd",content:"\u662f\u5426\u786e\u8ba4\u62d2\u7edd",okType:"danger",onOk:function(){this.fail()}})}},"\u4e0d\u901a\u8fc7"))}}]),t}(ie.a.Component),r=i))||r),ge=(s=ne["a"].create(),s((c=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={id_article:a.props.task.id_article,flag:null,receipt_title:null,receipt_num:null,address:null,receiver:null,format:"",type:1,expense:parseInt(t.expense)},i={};i.task=n,i.invoice=r,fetch("/contribute/task/manage",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],ye,ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u8d39\u6570\u989d\uff08\u5355\u4f4d\uff1a\u5143\uff09"},this.props.form.getFieldDecorator("expense",{rule:[{required:!0,message:"\u8bf7\u8f93\u5165\u5ba1\u7a3f\u8d39\u6570\u989d"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u91d1\u989d"}]})(ie.a.createElement(B["a"],{placeholder:"\u8bf7\u8f93\u5165\u5ba1\u7a3f\u8d39\u6570\u989d"}))),ie.a.createElement(W["a"],{type:"primary",onClick:this.onSubmit},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),o=c))||o),be=(l=ne["a"].create(),l((u=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={};r.task=n,r.id_role=new Array(t.numOfReferee),fetch("/contribute/task/check",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],ye,ie.a.createElement(ne["a"].Item,{label:"\u662f\u5426\u9700\u8981\u53d1\u7968"},0==this.props.invoice.flag?"\u5426":"\u662f"),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u62ac\u5934"},null==this.props.invoice.receipt_title?"":this.props.invoice.receipt_title),ie.a.createElement(ne["a"].Item,{label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"},null==this.props.invoice.receipt_num?"":this.props.invoice.receipt_num),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u5730\u5740"},null==this.props.invoice.address?"":this.props.invoice.address),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u4eba"},null==this.props.invoice.receiver?"":this.props.invoice.receiver),ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u4eba\u6570\u91cf"},this.props.form.getFieldDecorator("numOfReferee",{initialValue:1,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u7a3f\u4eba\u6570\u91cf"}]})(ie.a.createElement(M["a"],null,ie.a.createElement(M["a"].Option,{value:1},"1"),ie.a.createElement(M["a"].Option,{value:2},"2")))),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u786e\u8ba4"))}}]),t}(ie.a.Component),p=u))||p),Se=(m=ne["a"].create(),m((f=function(e){function t(e){var a;return Y()(this,t),a=X()(this,ee()(t).call(this,e)),a.getRefereeList=function(){if(0==a.state.refereeList.length)return null;for(var e=[],t=0;t<a.state.refereeList.length;t++)e.push(ie.a.createElement(M["a"].Option,{value:a.state.refereeList[t].id},a.state.refereeList[t].name));return e},a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={task:a.props.task};n.task.id_role=parseInt(t.referee),n.task.role=4,fetch("/contribute/task/judge",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a.state={refereeList:[]},a}return ae()(t,e),$()(t,[{key:"componentDidMount",value:function(){var e=this,t={resource:{func:"professors"}},a=[];fetch("/contribute/task/resource",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){if(1!=t.result)V["a"].error("\u901a\u8baf\u9519\u8bef");else{for(var n=t.data,r=0;r<n.length;r++)e.props.article.academicsec!=n[r].academicsec1&&e.props.article.academicsec!=n[r].academicsec2&&e.props.article.academicsec!=n[r].academicsec3||a.push(n[r]);e.setState({refereeList:a})}})}},{key:"render",value:function(){return ie.a.createElement(ne["a"],{layout:"horizontal"},ie.a.createElement(ne["a"].Item,{label:"\u9009\u62e9\u5ba1\u7a3f\u4eba"},this.props.form.getFieldDecorator("referee",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u7a3f\u4eba"}]})(ie.a.createElement(M["a"],null,this.getRefereeList()))),ie.a.createElement(W["a"],{tyle:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),d=f))||d),Oe=(h=ne["a"].create(),h((k=function(e){function t(e){var a;return Y()(this,t),a=X()(this,ee()(t).call(this,e)),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task;n.stat=t.stat,n.content=t.content;var r={task:n};fetch("/contribute/task/analyze",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a.state={refereeList:void 0},a}return ae()(t,e),$()(t,[{key:"componentWillMount",value:function(){var e=this,t={resource:{func:"professors"}},a={};fetch("/contribute/task/resource",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){if(1!=t.result)V["a"].error("\u901a\u8baf\u9519\u8bef");else{var n=t.data,r=!1,i=e.props.task.content,s=i.split(";")[0],o=i.split(";")[1];o||(r=!0);var c=parseInt(s.split(":")[0]),l=0;r||(l=parseInt(o.split(":")[0]));for(var p=0;p<n.length;p++)c==n[p].id&&(a.referee1=n[p]),r||l!=n[p].id||(a.referee2=n[p]);e.setState({refereeList:a})}})}},{key:"render",value:function(){var e=!1,t=this.props.task.content,a=t.split(";")[0],n=t.split(";")[1];n||(e=!0);var r=a.split(":")[1],i=0;e||(i=n.split(":")[1]);var s=[];return e&&s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee1.name.concat(" \u610f\u89c1"):""},r)),e||(s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee1.name.concat(" \u610f\u89c1"):""},r)),s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee2.name.concat(" \u610f\u89c1"):""},i))),ie.a.createElement(ne["a"],{layout:"horizontal"},s,ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u7ed3\u8bba"},this.props.form.getFieldDecorator("stat",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5ba1\u7a3f\u7ed3\u8bba"}]})(ie.a.createElement(M["a"],null,ie.a.createElement(M["a"].Option,{value:4},"\u901a\u8fc7\uff08\u4e0d\u8fdb\u884c\u683c\u5f0f\u4fee\u6539\uff09"),ie.a.createElement(M["a"].Option,{value:5},"\u901a\u8fc7\uff08\u9700\u8981\u683c\u5f0f\u4fee\u6539\uff09"),ie.a.createElement(M["a"].Option,{value:3},"\u5f85\u4fee\u6539"),ie.a.createElement(M["a"].Option,{value:2},"\u4e0d\u901a\u8fc7")))),ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u610f\u89c1"},this.props.form.getFieldDecorator("content",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}]})(ie.a.createElement(B["a"].TextArea,{row:4,placeholder:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}))),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),v=k))||v),Ce=(y=ne["a"].create(),y((g=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={};r.task=n,fetch("/contribute/task/check",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a.onReject=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={};n.stat=2,r.task=n,fetch("/contribute/task/check",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],{layout:"horizontal"},ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u901a\u8fc7",content:"\u662f\u5426\u786e\u8ba4\u901a\u8fc7",onOk:function(){this.onSubmit()}})}},"\u786e\u8ba4"),ie.a.createElement(W["a"],{type:"danger",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u62d2\u7edd",content:"\u662f\u5426\u786e\u8ba4\u62d2\u7edd",okType:"danger",onOk:function(){this.onReject()}})}},"\u62d2\u7edd"))}}]),t}(ie.a.Component),E=g))||E),Te=(b=ne["a"].create(),b((O=function(e){function t(e){var a;return Y()(this,t),a=X()(this,ee()(t).call(this,e)),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task;n.stat=t.stat,n.content=t.content;var r={task:n};fetch("/contribute/task/analyze",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a.state={refereeList:void 0},a}return ae()(t,e),$()(t,[{key:"componentWillMount",value:function(){var e=this,t={resource:{func:"professors"}},a={};fetch("/contribute/task/resource",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){if(1!=t.result)V["a"].error("\u901a\u8baf\u9519\u8bef");else{var n=t.data,r=!1,i=e.props.task.content,s=i.split(";")[0],o=i.split(";")[1];o||(r=!0);var c=parseInt(s.split(":")[0]),l=0;r||(l=parseInt(o.split(":")[0]));for(var p=0;p<n.length;p++)c==n[p].id&&(a.referee1=n[p]),r||l!=n[p].id||(a.referee2=n[p]);e.setState({refereeList:a})}})}},{key:"render",value:function(){var e=!1,t=this.props.task.content,a=t.split(";")[0],n=t.split(";")[1];n||(e=!0);var r=a.split(":")[1],i=0;e||(i=n.split(":")[1]);var s=[];return e&&s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee1.name.concat(" \u610f\u89c1"):""},r)),e||(s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee1.name.concat(" \u610f\u89c1"):""},r)),s.push(ie.a.createElement(ne["a"].Item,{label:this.state.refereeList?this.state.refereeList.referee2.name.concat(" \u610f\u89c1"):""},i))),ie.a.createElement(ne["a"],ye,s,ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u7ed3\u8bba"},this.props.form.getFieldDecorator("stat",{initialValue:5,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5ba1\u7a3f\u7ed3\u8bba"}]})(ie.a.createElement(M["a"],null,ie.a.createElement(M["a"].Option,{value:5},"\u901a\u8fc7"),ie.a.createElement(M["a"].Option,{value:2},"\u4e0d\u901a\u8fc7")))),ie.a.createElement(ne["a"].Item,{label:"\u5ba1\u7a3f\u610f\u89c1"},this.props.form.getFieldDecorator("content",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}]})(ie.a.createElement(B["a"].TextArea,{row:4,placeholder:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}))),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),S=O))||S),je=(C=ne["a"].create(),C((j=function(e){function t(e){var a;return Y()(this,t),a=X()(this,ee()(t).call(this,e)),a.uploadFile1=function(e){e.preventDefault(),a.refs.uploadBox1.click()},a.onFileChange1=function(e){var t=e.target.files[0];a.setState({file1:t,filename1:t?t.name:null})},a.onSubmit=function(e){if(e.preventDefault(),a.state.filename1&&""!=a.state.filename1){var t=new FormData,n={task:a.props.task};t.append("file",a.state.file1),t.append("all",JSON.stringify(n)),fetch("/contribute/task/design",{method:"POST",header:{"Content-Type":"multipart/form-data"},credentials:"include",body:t}).then(function(e){return e.json()}).then(function(e){1==e.result?le["a"].push("/editor/result"):V["a"].error("\u63d0\u4ea4\u9519\u8bef")})}else V["a"].error("\u8bf7\u4e0a\u4f20\u6587\u7ae0\u6587\u4ef6")},a.state={file:void 0,filename:void 0,width:"100%"},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],{layout:"horizontal"},ie.a.createElement(ne["a"].Item,{label:"\u63d0\u4ea4\u6587\u4ef6"},ie.a.createElement(W["a"],{onClick:this.uploadFile1},"\u9009\u62e9\u6587\u4ef6")," ",ie.a.createElement("br",null),this.state.filename1,ie.a.createElement("input",{type:"file",id:"uploadFile1",name:"file1",onChange:this.onFileChange1,style:{display:"none"},ref:"uploadBox1"})),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),T=j))||T),De=(D=ne["a"].create(),D((w=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={id_article:a.props.task.id_article,flag:null,receipt_title:null,receipt_num:null,address:null,receiver:null,format:"",type:2,expense:parseInt(t.expense)},i={};i.task=n,i.invoice=r,fetch("/contribute/task/manage",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],ye,ie.a.createElement(ne["a"].Item,{label:"\u7248\u9762\u8d39\u6570\u989d\uff08\u5355\u4f4d\uff1a\u5143\uff09"},this.props.form.getFieldDecorator("expense",{rule:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u9762\u8d39\u6570\u989d"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u91d1\u989d"}]})(ie.a.createElement(B["a"],{placeholder:"\u8bf7\u8f93\u5165\u7248\u9762\u8d39\u6570\u989d"}))),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u63d0\u4ea4"))}}]),t}(ie.a.Component),F=w))||F),Fe=(L=ne["a"].create(),L((N=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=X()(this,(e=ee()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.task,r={};r.task=n,fetch("/contribute/task/check",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){1!=e.result?V["a"].error("\u63d0\u4ea4\u9519\u8bef"):le["a"].push("/editor/result")})}})},a}return ae()(t,e),$()(t,[{key:"render",value:function(){return ie.a.createElement(ne["a"],ye,ie.a.createElement(ne["a"].Item,{label:"\u662f\u5426\u9700\u8981\u53d1\u7968"},0==this.props.invoice.flag?"\u5426":"\u662f"),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u62ac\u5934"},null==this.props.invoice.receipt_title?"":this.props.invoice.receipt_title),ie.a.createElement(ne["a"].Item,{label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"},null==this.props.invoice.receipt_num?"":this.props.invoice.receipt_num),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u5730\u5740"},null==this.props.invoice.address?"":this.props.invoice.address),ie.a.createElement(ne["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u4eba"},null==this.props.invoice.receiver?"":this.props.invoice.receiver),ie.a.createElement(W["a"],{type:"primary",onClick:function(){H["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",content:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4",onOk:function(){this.onSubmit()}})}},"\u786e\u8ba4"))}}]),t}(ie.a.Component),I=N))||I),we=(_=Object(se["connect"])(ke,null),_((x=function(e){function t(e){var a;return Y()(this,t),a=X()(this,ee()(t).call(this,e)),a.getWriterName=function(e){var t=e;if(""==e)return"";var a=JSON.parse(t),n="",r=0;for(r=0;r<a.length-1;r++)n=n.concat(a[r].name.concat(", "));return n=n.concat(a[r].name),n},a.getOperation=function(){return a.props.task=={}?null:0==a.props.step?ie.a.createElement(Ee,{task:a.props.task}):2==a.props.step?ie.a.createElement(ge,{task:a.props.task}):3==a.props.step?ie.a.createElement(be,{task:a.props.task,invoice:a.props.invoice}):4==a.props.step?ie.a.createElement(Se,{task:a.props.task,article:a.props.article}):6==a.props.step?ie.a.createElement(Oe,{task:a.props.task,article:a.props.article}):9==a.props.step?ie.a.createElement(Ce,{task:a.props.task,article:a.props.article}):11==a.props.step?ie.a.createElement(Te,{task:a.props.task,article:a.props.article}):12==a.props.step?ie.a.createElement(je,{task:a.props.task}):14==a.props.step?ie.a.createElement(De,{task:a.props.task}):16==a.props.step?ie.a.createElement(Fe,{task:a.props.task,article:a.props.article,invoice:a.props.invoice}):null},a.downloadURL=function(e){e.preventDefault(),fetch("/download/id=".concat(a.state.task.id,"&type=0")).then(function(e){e.blob().then(function(t){var a=document.createElement("a");document.body.appendChild(a),a.style.display="none";var n=window.URL.createObjectURL(t);a.href=n,a.download=e.headers.get("Content-Disposition").split(";")[1].split("filename=")[1],a.click(),document.body.removeChild(a)})})},a.translateAcademicSec=function(e){if(!a.props.academicSec||-1==e)return null;for(var t=0;t<a.props.academicSec.length;t++)if(a.props.academicSec[t].id==e)return a.props.academicSec[t].academicsec;return null},a.state={task:void 0,article:void 0,targetTime:void 0},a}return ae()(t,e),$()(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"".concat(he,"/queryList")});var e=ce()(this.props.task?this.props.task.date:void 0).add(30,"days");this.setState({task:this.props.task,article:this.props.article,targetTime:e})}},{key:"componentWillUnmount",value:function(){var e={article:{},task:{},invoice:{},step:0};this.props.dispatch({type:"".concat(ve,"/storePublic"),payload:e})}},{key:"render",value:function(){var e=this.state?ie.a.createElement(pe["a"],{className:fe.a.headerList,size:"small",col:"2"},ie.a.createElement(pe["a"].Description,{term:"\u4f5c\u8005"},this.getWriterName(this.state.article?this.state.article.writers_info:"")),ie.a.createElement(pe["a"].Description,{term:"\u5b66\u672f\u9886\u57df"},this.translateAcademicSec(this.state.article?this.state.article.academicsec:-1)),ie.a.createElement(pe["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u4e2d\u6587\uff09"},this.state.article?this.state.article.keyword1_cn:"","\xa0",this.state.article?this.state.article.keyword2_cn:"N/A","\xa0",this.state.article?this.state.article.keyword3_cn:"N/A","\xa0",this.state.article?this.state.article.keyword4_cn:"N/A"),ie.a.createElement(pe["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u82f1\u6587\uff09"},this.state.article?this.state.article.keyword1_en:"","\xa0",this.state.article?this.state.article.keyword2_en:"N/A","\xa0",this.state.article?this.state.article.keyword3_en:"N/A","\xa0",this.state.article?this.state.article.keyword4_en:"N/A"),ie.a.createElement(pe["a"].Description,{term:"\u6587\u7ae0\u5730\u5740"},ie.a.createElement("a",{onClick:this.downloadURL},"\u4e0b\u8f7d\u5730\u5740"))):null,t=this.state?ie.a.createElement(R["a"],null,ie.a.createElement(z["a"],{xs:24,sm:12},ie.a.createElement("div",{className:fe.a.textSecondary},"\u72b6\u6001"),ie.a.createElement("div",{className:fe.a.heading},"\u5f85\u5ba1\u7a3f")),ie.a.createElement(z["a"],{xs:24,sm:12},ie.a.createElement("div",{className:fe.a.textSecondary},"\u8ddd\u79bb\u622a\u6b62\u65f6\u95f4"),ie.a.createElement("div",{className:fe.a.heading},ie.a.createElement(ue["a"],{target:this.state.targetTime})))):null;return ie.a.createElement(me["a"],{title:"\u6587\u7ae0\u6807\u9898\uff1a".concat(this.state.article?this.state.article.title:""),logo:ie.a.createElement("img",{alt:"",src:"https://gw.alipayobjects.com/zos/rmsportal/nxkuOJlFJuAUhzlMTCEe.png"}),content:e,extraContent:t},ie.a.createElement(q["a"],{title:"\u4e2d\u6587\u6458\u8981",style:{marginBottom:24},bordered:!1},this.state.article?this.state.article.summary_cn:""),ie.a.createElement(q["a"],{title:"\u6d41\u7a0b\u8fdb\u5ea6",style:{marginBottom:24},bordered:!1},ie.a.createElement(A["a"],P()({progressDot:!0,direction:"horizontal",current:this.props.step?this.props.step:0},"direction","vertical"),ie.a.createElement(A["a"].Step,{title:"\u63d0\u4ea4\u7a3f\u4ef6",description:"\u7a3f\u4ef6\u63d0\u4ea4\u5b8c\u6bd5"}),ie.a.createElement(A["a"].Step,{title:"\u7f16\u8f91\u521d\u5ba1",description:"\u7f16\u8f91\u5bf9\u7a3f\u4ef6\u8fdb\u884c\u521d\u5ba1"}),ie.a.createElement(A["a"].Step,{title:"\u7f34\u7eb3\u5ba1\u7a3f\u8d39",description:"\u901a\u8fc7\u521d\u5ba1\u7684\u7a3f\u4ef6\u7f34\u7eb3\u5ba1\u7a3f\u8d39"}),ie.a.createElement(A["a"].Step,{title:"\u786e\u8ba4\u5ba1\u7a3f\u8d39\u7f34\u8d39\u60c5\u51b5",description:"\u7f16\u8f91\u786e\u8ba4\u5ba1\u7a3f\u8d39\u7f34\u8d39\u60c5\u51b5"}),ie.a.createElement(A["a"].Step,{title:"\u5206\u914d\u5ba1\u7a3f\u4eba",description:"\u4e3a\u5df2\u786e\u8ba4\u5ba1\u7a3f\u8d39\u7684\u6587\u7ae0\u5206\u914d\u5ba1\u7a3f\u4eba"}),ie.a.createElement(A["a"].Step,{title:"\u5ba1\u7a3f\u4e2d",description:"\u5ba1\u7a3f\u4eba\u5ba1\u7a3f\u4e2d"}),ie.a.createElement(A["a"].Step,{title:"\u786e\u8ba4\u5ba1\u7a3f\u610f\u89c1",description:"\u8bf7\u786e\u5b9a\u672c\u6b21\u5ba1\u7a3f\u6700\u7ec8\u5ba1\u7a3f\u610f\u89c1"}),ie.a.createElement(A["a"].Step,{title:"\u5ba1\u7a3f\u7ed3\u8bba\u53cd\u9988",description:"\u7f16\u8f91\u90e8\u5df2\u53cd\u9988\u5ba1\u7a3f\u610f\u89c1"}),ie.a.createElement(A["a"].Step,{title:"\u6295\u7a3f\u4eba\u4fee\u6539\u4e2d",description:"\u6295\u7a3f\u4eba\u6b63\u5728\u6839\u636e\u610f\u89c1\u8fdb\u884c\u6574\u6539"}),ie.a.createElement(A["a"].Step,{title:"\u91cd\u5ba1\u5f85\u786e\u8ba4",description:"\u6295\u7a3f\u4eba\u5df2\u91cd\u65b0\u63d0\u4ea4\u7a3f\u4ef6\uff0c\u5f85\u786e\u8ba4"}),ie.a.createElement(A["a"].Step,{title:"\u91cd\u5ba1\u5ba1\u7a3f\u4e2d",description:"\u5ba1\u7a3f\u4eba\u5ba1\u7a3f\u4e2d"}),ie.a.createElement(A["a"].Step,{title:"\u786e\u8ba4\u91cd\u5ba1\u5ba1\u7a3f\u610f\u89c1",description:"\u8bf7\u786e\u5b9a\u91cd\u5ba1\u5ba1\u7a3f\u6700\u7ec8\u5ba1\u7a3f\u610f\u89c1"}),ie.a.createElement(A["a"].Step,{title:"\u683c\u5f0f\u4fee\u6539",description:"\u8bf7\u5bf9\u6587\u7ae0\u8fdb\u884c\u683c\u5f0f\u7f16\u8f91"}),ie.a.createElement(A["a"].Step,{title:"\u4f5c\u8005\u5f85\u786e\u8ba4",description:"\u7b49\u5f85\u4f5c\u8005\u786e\u8ba4\u683c\u5f0f\u4fee\u6539\u7ed3\u679c"}),ie.a.createElement(A["a"].Step,{title:"\u786e\u5b9a\u7248\u9762\u8d39",description:"\u8bf7\u786e\u5b9a\u7248\u9762\u8d39\u91d1\u989d"}),ie.a.createElement(A["a"].Step,{title:"\u5f85\u7f34\u7eb3\u7248\u9762\u8d39",description:"\u7b49\u5f85\u6295\u7a3f\u4eba\u7f34\u7eb3\u7248\u9762\u8d39"}),ie.a.createElement(A["a"].Step,{title:"\u786e\u8ba4\u7248\u9762\u8d39\u7f34\u7eb3\u60c5\u51b5",description:"\u786e\u8ba4\u6295\u7a3f\u4eba\u5df2\u7f34\u7eb3\u7248\u9762\u8d39"}),ie.a.createElement(A["a"].Step,{title:"\u5b8c\u6210",description:"\u6d41\u7a0b\u5df2\u5b8c\u6210"}))),ie.a.createElement(q["a"],{title:"\u64cd\u4f5c",style:{marginBottom:24},bordered:!1},this.getOperation()))}}]),t}(ie.a.Component),J=x))||J);t["default"]=we},Hs2e:function(e,t,a){e.exports={headerList:"antd-pro-pages-editor-task-detail-headerList",tabsCard:"antd-pro-pages-editor-task-detail-tabsCard",noData:"antd-pro-pages-editor-task-detail-noData",heading:"antd-pro-pages-editor-task-detail-heading",stepDescription:"antd-pro-pages-editor-task-detail-stepDescription",textSecondary:"antd-pro-pages-editor-task-detail-textSecondary"}}}]);