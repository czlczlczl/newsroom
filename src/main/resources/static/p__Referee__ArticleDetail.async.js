(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{"+1u/":function(e,t,a){"use strict";a.r(t);a("FJo9");var r,n,l,i,s,c,o,d,u=a("L41K"),p=(a("IzEo"),a("bx4M")),m=(a("14J3"),a("BMrR")),h=(a("jCWc"),a("kPKH")),f=(a("+L6B"),a("2/Rp")),E=(a("BoS7"),a("Sdc0")),v=(a("OaEy"),a("2fM7")),g=(a("sRBo"),a("kaz8")),k=(a("7Kak"),a("9yH6")),b=(a("/zsF"),a("PArb")),y=(a("5NDa"),a("5rEg")),S=(a("miYZ"),a("tsqr")),w=a("2Taf"),T=a.n(w),j=a("vZ4D"),D=a.n(j),O=a("l4Ni"),_=a.n(O),C=a("ujKo"),F=a.n(C),N=a("MhPg"),I=a.n(N),A=(a("y8nQ"),a("Vl3Y")),R=a("q1tI"),q=a.n(R),U=a("MuoO"),x=a("wd/R"),L=a.n(x),J=a("usdK"),M=a("+kNj"),G=a("Yaqk"),z=a("zHco"),P=a("UUne"),B=a.n(P),K="academicSection",H="refereeDetailPublicStorage",Y=function(e){var t=e[H].task,a=e[H].article,r=e[K].list;return{academicSec:r,article:a,task:t}},Z={labelCol:{span:5},wrapperCol:{span:19}},Q=(r=Object(U["connect"])(Y,null),n=A["a"].create(),r(l=n((i=function(e){function t(e){var a;return T()(this,t),a=_()(this,F()(t).call(this,e)),a.academicOptions=[{label:"1. \u6709\u65b0\u6210\u679c",value:"1"},{label:"2. \u6709\u65b0\u7ecf\u9a8c",value:"2"},{label:"3. \u6709\u65b0\u89c1\u89e3",value:"3"},{label:"4. \u91cd\u590d\u4ed6\u4eba\u5de5\u4f5c",value:"4"},{label:"5. \u65e0\u65b0\u5185\u5bb9",value:"5"},{label:"6. \u8d28\u91cf\u5dee",value:"6"}],a.wordOptions=[{label:"1. \u7b80\u5355\u901a\u987a",value:"1"},{label:"2. \u91cd\u590d\u5197\u957f",value:"2"},{label:"3. \u903b\u8f91\u6027\u5dee",value:"3"},{label:"4. \u6709\u8bed\u75c5",value:"4"},{label:"5. \u6709\u4e0d\u89c4\u8303\u6587\u5b57",value:"5"},{label:"6. \u6709\u6807\u70b9\u7b26\u53f7\u4f7f\u7528\u4e0d\u5f53\u4e4b\u5904",value:"6"}],a.selectReferee=function(){var e={resource:{func:"professors"}},t=[];fetch("/contribute/task/resource",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(1!=e.result)S["a"].error("\u901a\u8baf\u9519\u8bef");else{var r=e.data;t=r.map(function(e){var t={id:-1,name:""};return t.id=e.id,t.name=e.name,t}),a.setState({options:t,select:1})}})},a.selectAca=function(){var e=a.props.academicSec,t=e.map(function(e){var t={id:-1,name:""};return t.id=e.id,t.name=e.academicsec,t});a.setState({options:t,select:2})},a.selectOnChange=function(e){var t=a.state.select,r=[];1==t?r=[e]:2==t&&(r=[0,e]),a.setState({selected:r})},a.handleNeedTrans=function(e){a.setState({needTrans:e})},a.onSubmit=function(e){var t=a.state,r=t.needTrans,n=t.selected;e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){if(!t.publishFuc&&!t.backModify&&!t.reject)return void S["a"].error("\u8bf7\u586b\u5199\u5904\u7406\u7ed3\u8bba");var l={content:t.content,contentToEditor:t.contentToEditor,politics:t.politics,secret:t.secret,academic:t.academic,scientific:t.scientific,word:t.word,practicality:t.practicality,conclusion:t.conclusion,opinion:a.state.opinion,publishFuc:1==a.state.opinion?t.publishFuc:null,backModify:2==a.state.opinion?t.backModify:null,giveTo:3==a.state.opinion?t.giveTo:null,reject:4==a.state.opinion?t.reject:null},i=JSON.stringify(l),s={task:{id:a.props.task.id,id_article:a.props.task.id_article,id_role:a.props.task.id_role,content:i,stat:5-a.state.opinion,role:a.props.task.role,flag:a.props.task.flag}};r&&(s={task:{id:a.props.task.id,id_article:a.props.task.id_article,id_role:a.props.task.id_role,content:i,stat:5-a.state.opinion,role:a.props.task.role,flag:a.props.task.flag},id_role:n}),fetch("/contribute/task/judge",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json;charset=UTF-8"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){1!=e.result?S["a"].error("\u63d0\u4ea4\u9519\u8bef"):J["a"].push("/referee/judgeresult")})}})},a.state={opinion:0,select:0,options:null,selected:[],needTrans:!1},a}return I()(t,e),D()(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.select,r=t.options,n=(t.checked,t.needTrans);return q.a.createElement(A["a"],Z,q.a.createElement(A["a"].Item,{label:"\u5ba1\u7a3f\u610f\u89c1"},this.props.form.getFieldDecorator("content",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}]})(q.a.createElement(y["a"].TextArea,{row:10,placeholder:"\u8bf7\u586b\u5199\u5ba1\u7a3f\u610f\u89c1"}))),q.a.createElement(A["a"].Item,{label:"\u7ed9\u7f16\u8f91\u90e8\u7684\u610f\u89c1"},this.props.form.getFieldDecorator("contentToEditor",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7ed9\u7f16\u8f91\u90e8\u7684\u610f\u89c1"}]})(q.a.createElement(y["a"].TextArea,{row:10,placeholder:"\u8bf7\u586b\u5199\u7ed9\u7f16\u8f91\u90e8\u7684\u610f\u89c1"}))),q.a.createElement(b["a"],null),"\u8bc4\u4ef7\u610f\u89c1\uff1a",q.a.createElement(A["a"].Item,{label:"\u653f\u6cbb\u65b9\u9762"},this.props.form.getFieldDecorator("politics",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u653f\u6cbb\u65b9\u9762\u610f\u89c1"}]})(q.a.createElement(k["a"].Group,null,q.a.createElement(k["a"],{value:1},"1. \u65e0\u9519\u8bef"),q.a.createElement(k["a"],{value:2},"2. \u6709\u9519\u8bef")))),q.a.createElement(A["a"].Item,{label:"\u6d89\u5bc6\u95ee\u9898"},this.props.form.getFieldDecorator("secret",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u6d89\u5bc6"}]})(q.a.createElement(k["a"].Group,null,q.a.createElement(k["a"],{value:1},"1. \u65e0\u6d89\u5bc6\u95ee\u9898"),q.a.createElement(k["a"],{value:2},"2. \u6709\u6d89\u5bc6\u95ee\u9898")))),q.a.createElement(A["a"].Item,{label:"\u5b66\u672f\u65b9\u9762"},this.props.form.getFieldDecorator("academic",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b66\u672f\u65b9\u9762\u610f\u89c1"}]})(q.a.createElement(g["a"].Group,{options:this.academicOptions}))),q.a.createElement(A["a"].Item,{label:"\u79d1\u5b66\u6027\u65b9\u9762"},this.props.form.getFieldDecorator("scientific",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u79d1\u5b66\u6027\u65b9\u9762\u9009\u9879"}]})(q.a.createElement(k["a"].Group,null,q.a.createElement(k["a"],{value:1},"1. \u5f88\u5f3a"),q.a.createElement(k["a"],{value:2},"2. \u5f3a"),q.a.createElement(k["a"],{value:3},"3. \u4e00\u822c"),q.a.createElement(k["a"],{value:4},"4. \u5dee")))),q.a.createElement(A["a"].Item,{label:"\u6587\u5b57\u65b9\u9762"},this.props.form.getFieldDecorator("word",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6587\u5b57\u65b9\u9762\u610f\u89c1"}]})(q.a.createElement(g["a"].Group,{options:this.wordOptions}))),q.a.createElement(A["a"].Item,{label:"\u5b9e\u7528\u6027\u65b9\u9762"},this.props.form.getFieldDecorator("practicality",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b9e\u7528\u6027\u65b9\u9762\u9009\u9879"}]})(q.a.createElement(k["a"].Group,null,q.a.createElement(k["a"],{value:1},"1. \u5f88\u5b9e\u7528"),q.a.createElement(k["a"],{value:2},"2. \u5b9e\u7528"),q.a.createElement(k["a"],{value:3},"3. \u5b9e\u7528\u6027\u5dee"),q.a.createElement(k["a"],{value:4},"4. \u4e0d\u5b9e\u7528")))),q.a.createElement(A["a"].Item,{label:"\u603b\u8bc4\u4ef7"},this.props.form.getFieldDecorator("conclusion",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u603b\u8bc4\u4ef7\u9009\u9879"}]})(q.a.createElement(k["a"].Group,null,q.a.createElement(k["a"],{value:1},"1. \u4f18"),q.a.createElement(k["a"],{value:2},"2. \u826f"),q.a.createElement(k["a"],{value:3},"3. \u4e2d"),q.a.createElement(k["a"],{value:4},"4. \u5dee")))),q.a.createElement(b["a"],null),"\u5904\u7406\u610f\u89c1\uff1a",q.a.createElement(A["a"].Item,{label:"\u8bf7\u9009\u62e9\u5904\u7406\u610f\u89c1"},q.a.createElement(v["a"],{value:this.state.opinion,onSelect:function(t){e.setState({opinion:t})}},q.a.createElement(v["a"].Option,{value:0},"\u8bf7\u9009\u62e9\u5904\u7406\u610f\u89c1"),q.a.createElement(v["a"].Option,{value:1},"\u520a\u7528"),q.a.createElement(v["a"].Option,{value:2},"\u9000\u4fee"),q.a.createElement(v["a"].Option,{value:3},"\u9000\u7a3f"))),q.a.createElement(A["a"].Item,{label:"\u520a\u7528"},this.props.form.getFieldDecorator("publishFuc",{})(q.a.createElement(k["a"].Group,{disabled:1!=this.state.opinion},q.a.createElement(k["a"],{value:1},"1. \u5168\u6587\u53d1\u8868"),q.a.createElement(k["a"],{value:2},"2. \u6458\u8981\u53d1\u8868"),q.a.createElement(k["a"],{value:3},"3. \u7efc\u5408\u53d1\u8868")))),q.a.createElement(A["a"].Item,{label:"\u9000\u4fee"},this.props.form.getFieldDecorator("backModify",{})(q.a.createElement(k["a"].Group,{disabled:2!=this.state.opinion},q.a.createElement(k["a"],{value:1},"1. \u9000\u4fee\u540e\u53d1\u8868"),q.a.createElement(k["a"],{value:2},"2. \u9000\u4fee\u540e\u518d\u5ba1")))),q.a.createElement(A["a"].Item,{label:"\u9000\u7a3f"},this.props.form.getFieldDecorator("reject",{})(q.a.createElement(k["a"].Group,{disabled:3!=this.state.opinion},q.a.createElement(k["a"],{value:1},"1. \u4e0d\u5c5e\u672c\u520a\u62a5\u9053\u8303\u56f4"),q.a.createElement(k["a"],{value:2},"2. \u4e0e\u5df2\u53d1\u8868\u6216\u5373\u5c06\u520a\u7528\u7684\u6587\u7ae0\u96f7\u540c\uff0c\u800c\u6b64\u7a3f\u65e0\u72ec\u5230\u4e4b\u5904"),q.a.createElement(k["a"],{value:3},"3. \u8d28\u91cf\u4e0d\u597d"),q.a.createElement(k["a"],{value:4},"4. \u5176\u4ed6")))),q.a.createElement(A["a"].Item,{label:"\u8f6c\u9001"},q.a.createElement("div",null,q.a.createElement(E["a"],{onChange:this.handleNeedTrans,disabled:7==this.props.task.stat}),q.a.createElement("div",{style:{display:n?"block":"none"}},q.a.createElement(f["a"],{type:"primary",onClick:this.selectReferee},"\u9009\u62e9\u5ba1\u7a3f\u4eba"),q.a.createElement(f["a"],{type:"primary",onClick:this.selectAca,style:{marginLeft:20}},"\u9009\u62e9\u5b66\u672f\u9886\u57df"),q.a.createElement(v["a"],{onChange:this.selectOnChange,style:{display:0==a?"none":"block"}},r?r.map(function(e,t){return q.a.createElement(v["a"].Option,{value:e.id,key:t},e.name)}):null)))),q.a.createElement(f["a"],{type:"primary",onClick:this.onSubmit},"\u63d0\u4ea4"),q.a.createElement(f["a"],{type:"danger",onClick:this.props.onReject,style:{marginLeft:20}},"\u62d2\u7edd"))}}]),t}(q.a.Component),l=i))||l)||l),V=(s=Object(U["connect"])(Y,null),c=A["a"].create(),s(o=c((d=function(e){function t(e){var a;return T()(this,t),a=_()(this,F()(t).call(this,e)),a.translateAcademicSec=function(e){if(-1==e)return null;if(!a.props.academicSec)return null;for(var t=0;t<a.props.academicSec.length;t++)if(a.props.academicSec[t].id==e)return a.props.academicSec[t].academicsec;return null},a.onSubmit=function(){a.props.form.validateFields(function(e,t){if(!e){var r={task:{id:a.state.task.id,id_article:a.state.task.id_article,id_role:a.state.task.id_role,content:t.content,stat:t.stat,role:a.state.task.role,flag:a.state.task.flag}};fetch("/contribute/task/judge",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json;charset=UTF-8"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){1!=e.result?S["a"].error("\u63d0\u4ea4\u9519\u8bef"):J["a"].push("/referee/judgeresult")})}})},a.onReject=function(){var e={task:{id:a.state.task.id,id_article:a.state.task.id_article,id_role:a.state.task.id_role,content:a.state.task.content,stat:a.state.task.stat,role:3,flag:a.state.task.flag}};fetch("/contribute/task/judge",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){1!=e.result?S["a"].error("\u63d0\u4ea4\u9519\u8bef"):J["a"].push("/referee/rejectresult")})},a.downloadURL=function(e){e.preventDefault(),fetch("/download/id=".concat(a.state.task.id,"&type=0")).then(function(e){e.blob().then(function(t){var a=document.createElement("a");document.body.appendChild(a),a.style.display="none";var r=window.URL.createObjectURL(t);a.href=r,a.download=e.headers.get("Content-Disposition").split(";")[1].split("filename=")[1],a.click(),document.body.removeChild(a)})})},a.state={task:void 0,article:void 0,targetTime:0},a}return I()(t,e),D()(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"".concat(K,"/queryList")});var e=L()(this.props.task?this.props.task.date:void 0).add(30,"days");this.setState({task:this.props.task,article:this.props.article,targetTime:e})}},{key:"render",value:function(){var e=this.state?q.a.createElement(M["a"],{className:B.a.headerList,size:"small",col:"2"},q.a.createElement(M["a"].Description,{term:"\u5b66\u672f\u9886\u57df"},this.translateAcademicSec(this.state.article?this.state.article.academicsec:-1)),q.a.createElement(M["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u4e2d\u6587\uff09"},this.state.article?this.state.article.keyword1_cn:"","\xa0",this.state.article?this.state.article.keyword2_cn:"N/A","\xa0",this.state.article?this.state.article.keyword3_cn:"N/A","\xa0",this.state.article?this.state.article.keyword4_cn:"N/A"),q.a.createElement(M["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u82f1\u6587\uff09"},this.state.article?this.state.article.keyword1_en:"","\xa0",this.state.article?this.state.article.keyword2_en:"N/A","\xa0",this.state.article?this.state.article.keyword3_en:"N/A","\xa0",this.state.article?this.state.article.keyword4_en:"N/A"),q.a.createElement(M["a"].Description,{term:"\u6587\u7ae0\u5730\u5740"},q.a.createElement("a",{onClick:this.downloadURL},"\u4e0b\u8f7d\u5730\u5740"))):null,t=this.state?q.a.createElement(m["a"],null,q.a.createElement(h["a"],{xs:24,sm:12},q.a.createElement("div",{className:B.a.textSecondary},"\u72b6\u6001"),q.a.createElement("div",{className:B.a.heading},"\u5f85\u5ba1\u7a3f")),q.a.createElement(h["a"],{xs:24,sm:12},q.a.createElement("div",{className:B.a.textSecondary},"\u8ddd\u79bb\u622a\u6b62\u65f6\u95f4"),q.a.createElement("div",{className:B.a.heading},q.a.createElement(G["a"],{target:this.state.targetTime})))):null;return q.a.createElement(z["a"],{title:"\u6587\u7ae0\u6807\u9898\uff1a".concat(this.state.article?this.state.article.title:""),logo:q.a.createElement("img",{alt:"",src:"https://gw.alipayobjects.com/zos/rmsportal/nxkuOJlFJuAUhzlMTCEe.png"}),content:e,extraContent:t},q.a.createElement(p["a"],{title:"\u4e2d\u6587\u6458\u8981",style:{marginBottom:24},bordered:!1},this.state.article?this.state.article.summary_cn:""),q.a.createElement(p["a"],{title:"\u6d41\u7a0b\u8fdb\u5ea6",style:{marginBottom:24},bordered:!1},q.a.createElement(u["a"],{progressDot:!0,direction:"horizontal",current:0},q.a.createElement(u["a"].Step,{title:"\u63d0\u4ea4\u5ba1\u7a3f\u610f\u89c1",description:"\u8bf7\u63d0\u4ea4\u4f60\u5bf9\u672c\u7bc7\u6587\u7ae0\u7684\u5ba1\u7a3f\u610f\u89c1"}),q.a.createElement(u["a"].Step,{title:"\u5ba1\u7a3f\u5b8c\u6210",description:"\u8be5\u7bc7\u6587\u7ae0\u7684\u5ba1\u7a3f\u4efb\u52a1\u5df2\u5b8c\u6210"}))),q.a.createElement(p["a"],{title:"\u64cd\u4f5c",style:{marginBottom:24},bordered:!1},q.a.createElement(Q,{onReject:this.onReject})))}}]),t}(q.a.Component),o=d))||o)||o);t["default"]=V},UUne:function(e,t,a){e.exports={headerList:"antd-pro-pages-referee-article-detail-headerList",tabsCard:"antd-pro-pages-referee-article-detail-tabsCard",noData:"antd-pro-pages-referee-article-detail-noData",heading:"antd-pro-pages-referee-article-detail-heading",stepDescription:"antd-pro-pages-referee-article-detail-stepDescription",textSecondary:"antd-pro-pages-referee-article-detail-textSecondary"}}}]);