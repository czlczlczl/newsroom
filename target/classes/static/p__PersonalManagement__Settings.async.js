(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"/idP":function(e,t,a){"use strict";a.r(t);a("+L6B");var n,r,i,o,s=a("2/Rp"),l=(a("5NDa"),a("5rEg")),c=(a("miYZ"),a("tsqr")),u=(a("OaEy"),a("2fM7")),m=a("2Taf"),d=a.n(m),f=a("vZ4D"),p=a.n(f),h=a("l4Ni"),v=a.n(h),g=a("ujKo"),E=a.n(g),y=a("MhPg"),b=a.n(y),I=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),S=a.n(k),q=a("MuoO"),L=a("dPBl"),O=a("34ay"),D=a("OCLO"),V=a.n(D),w="personalInfo",j="academicSection",M=function(e){var t=e[w].information,a=e[j].list;return{academicSec:a,currentUserInfo:t}},A=(n=Object(q["connect"])(M,null),r=I["a"].create(),n(i=r((o=function(e){function t(e){var a;return d()(this,t),a=v()(this,E()(t).call(this,e)),a.generateAcademicSec=function(){if(!a.props.academicSec)return null;for(var e=[],t=0;t<a.props.academicSec.length;t++)e.push(S.a.createElement(u["a"].Option,{value:a.props.academicSec[t].id},a.props.academicSec[t].academicsec));return e},a.checkAcademicSec2=function(e,t,n){t&&t===a.props.form.getFieldValue("academicsec1")&&n("\u8bf7\u4e0d\u8981\u9009\u62e9\u76f8\u540c\u7684\u5b66\u672f\u5206\u533a"),n()},a.checkAcademicSec3=function(e,t,n){!t||t!==a.props.form.getFieldValue("academicsec1")&&t!==a.props.form.getFieldValue("academicsec2")||n("\u8bf7\u4e0d\u8981\u9009\u62e9\u76f8\u540c\u7684\u5b66\u672f\u5206\u533a"),n()},a.handleSubmitAuthor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.researchdir=t.researchdir,n.academicsec1=t.academicsec1,n.academicsec2=t.academicsec2?t.academicsec2:null,n.academicsec3=t.academicsec3?t.academicsec3:null,a.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.handleSubmitReferee=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.academicsec1=t.academicsec1,n.academicsec2=t.academicsec2?t.academicsec2:null,n.academicsec3=t.academicsec3?t.academicsec3:null,a.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.state={information:void 0},a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(t){1===t.result&&(console.log(t),e.setState({information:t.information}))}}),this.props.dispatch({type:"".concat(j,"/queryList")})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;if("author"==Object(O["a"])()[0]){var a=this.state.information?this.state.information.researchdir:null,n=this.state.information?this.state.information.academicsec1:null,r=this.state.information&&this.state.information.academicsec2?this.state.information.academicsec2:null,i=this.state.information&&this.state.information.academicsec3?this.state.information.academicsec3:null;return S.a.createElement("div",{className:V.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7814\u7a76\u65b9\u5411"},t("researchdir",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7814\u7a76\u65b9\u5411"},{max:100,message:"\u6700\u591a\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7814\u7a76\u65b9\u5411"}))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a1"},t("academicsec1",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u503e\u5411\u6295\u7a3f\u7684\u5b66\u672f\u5206\u533a"}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a2"},t("academicsec2",{initialValue:r,rules:[{validator:this.checkAcademicSec2}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a3"},t("academicsec3",{initialValue:i,rules:[{validator:this.checkAcademicSec3}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitAuthor},"\u66f4\u65b0"))))}if("referee"==Object(O["a"])()[0]){var o=this.state.information?this.state.information.academicsec1:null,c=this.state.information&&this.state.information.academicsec2?this.state.information.academicsec2:null,m=this.state.information&&this.state.information.academicsec3?this.state.information.academicsec3:null;return S.a.createElement("div",{className:V.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a1"},t("academicsec1",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u503e\u5411\u6295\u7a3f\u7684\u5b66\u672f\u5206\u533a"}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a2"},t("academicsec2",{initialValue:c,rules:[{validator:this.checkAcademicSec2}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(I["a"].Item,{label:"\u5b66\u672f\u5206\u533a3"},t("academicsec3",{initialValue:m,rules:[{validator:this.checkAcademicSec3}]})(S.a.createElement(u["a"],null,this.generateAcademicSec()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitReferee},"\u66f4\u65b0"))))}return S.a.createElement(L["a"],{to:"/account/profile"})}}]),t}(S.a.Component),i=o))||i)||i);t["default"]=A},"4atb":function(e,t,a){"use strict";a.r(t);a("2qtc");var n,r,i,o,s=a("kLXV"),l=(a("/zsF"),a("PArb")),c=(a("+L6B"),a("2/Rp")),u=(a("miYZ"),a("tsqr")),m=a("p0pE"),d=a.n(m),f=(a("5NDa"),a("5rEg")),p=a("2Taf"),h=a.n(p),v=a("vZ4D"),g=a.n(v),E=a("l4Ni"),y=a.n(E),b=a("ujKo"),I=a.n(b),k=a("MhPg"),S=a.n(k),q=(a("y8nQ"),a("Vl3Y")),L=a("q1tI"),O=a.n(L),D=a("MuoO"),V=a("dPBl"),w=a("34ay"),j=a("OCLO"),M=a.n(j),A="personalInfo",N="modifyPwSafeQue",C=function(e){var t=e[N],a=e[A].information;return{currentUserInfo:a,safeQuestion:t}},F=(n=Object(D["connect"])(C,null),r=q["a"].create(),n(i=r((o=function(e){function t(e){var a;return h()(this,t),a=y()(this,I()(t).call(this,e)),a.renderBank=function(){return a.state.information?a.state.isConfirmed?O.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"},a.props.form.getFieldDecorator("bank",{initialValue:a.state.information.bank,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"}]})(O.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"}))):O.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"},"******"):O.a.createElement(q["a"].Item,{label:"\u5f00\u6237\u884c"})},a.renderCard=function(){return a.state.information?a.state.isConfirmed?O.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"},a.props.form.getFieldDecorator("card",{initialValue:a.state.information.card,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u94f6\u884c\u5361\u8d26\u53f7"},{len:16,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u94f6\u884c\u5361\u8d26\u53f7"}]})(O.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u5361\u8d26\u53f7"}))):O.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"},"*****************"):O.a.createElement(q["a"].Item,{label:"\u94f6\u884c\u5361\u8d26\u53f7"})},a.handleSafeQue=function(e){e.preventDefault(),a.setState(d()({},a.state,{modalIsVisable:!0}))},a.handleOk=function(e){if(e.preventDefault(),a.state.safeQueA1&&a.state.safeQueA2&&a.state.safeQueA3){var t={answer1:a.state.safeQueA1,answer2:a.state.safeQueA2,answer3:a.state.safeQueA3,username:a.state.information.username,role:4};a.props.dispatch({type:"".concat(N,"/verifySafeAnswers"),payload:t,callback:function(e){1!=e?u["a"].error("\u5bc6\u4fdd\u95ee\u9898\u9519\u8bef"):a.setState(d()({},a.state,{isConfirmed:!0,modalIsVisable:!1}))}})}else u["a"].error("\u8bf7\u5b8c\u6574\u56de\u7b54\u5b89\u5168\u95ee\u9898")},a.handleCancel=function(e){e.preventDefault(),a.setState(d()({},a.state,{modalIsVisable:!1}))},a.state={information:void 0,isConfirmed:!1,modalIsVisable:!1,safeQueA1:void 0,safeQueA2:void 0,safeQueA3:void 0},a}return S()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(A,"/queryPersonalInfo"),callback:function(t){if(1===t.result){console.log(t),e.setState(d()({},e.state,{information:t.information}));var a={username:t.information.username,role:4};e.props.dispatch({type:"".concat(N,"/querySafeQuestion"),payload:a})}}})}},{key:"render",value:function(){var e=this;return"referee"!=Object(w["a"])()[0]?O.a.createElement(V["a"],{to:"/account/profile"}):O.a.createElement("div",{className:M.a.info,ref:function(t){return e.view=t}},O.a.createElement("div",{className:M.a.left},O.a.createElement(q["a"],{layout:"vertical",hideRequiredMark:!0},this.renderBank(),this.renderCard(),O.a.createElement(c["a"],{type:"primary",onClick:this.handleSubmit},"\u66f4\u65b0"),"\xa0",O.a.createElement(c["a"],{onClick:this.handleSafeQue},"\u5b89\u5168\u95ee\u9898"))),O.a.createElement(s["a"],{title:"\u9a8c\u8bc1\u5b89\u5168\u95ee\u9898",visible:this.state.modalIsVisable,onOk:this.handleOk,onCancel:this.handleCancel},O.a.createElement("div",{style:{marginTop:16,marginLeft:16,marginRight:16,marginBottom:16}},"\u5b89\u5168\u95ee\u98981\uff1a",this.props.safeQuestion?this.props.safeQuestion.que1:null," ",O.a.createElement("br",null),"\u5b89\u5168\u7b54\u68481\uff1a",O.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98981",onChange:function(t){t.preventDefault(),e.setState(d()({},e.state,{safeQueA1:t.target.value}))}}),O.a.createElement(l["a"],null),"\u5b89\u5168\u95ee\u98982\uff1a",this.props.safeQuestion?this.props.safeQuestion.que2:null," ",O.a.createElement("br",null),"\u5b89\u5168\u7b54\u68482\uff1a",O.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98982",onChange:function(t){t.preventDefault(),e.setState(d()({},e.state,{safeQueA2:t.target.value}))}}),O.a.createElement(l["a"],null),"\u5b89\u5168\u95ee\u98983\uff1a",this.props.safeQuestion?this.props.safeQuestion.que3:null," ",O.a.createElement("br",null),"\u5b89\u5168\u7b54\u68483\uff1a",O.a.createElement(f["a"],{placeholder:"\u8bf7\u56de\u7b54\u5b89\u5168\u95ee\u98983",onChange:function(t){t.preventDefault(),e.setState(d()({},e.state,{safeQueA3:t.target.value}))}}))))}}]),t}(O.a.Component),i=o))||i)||i);t["default"]=F},FYcS:function(e,t,a){"use strict";a.r(t);a("+L6B");var n,r,i,o,s=a("2/Rp"),l=(a("5NDa"),a("5rEg")),c=(a("miYZ"),a("tsqr")),u=(a("OaEy"),a("2fM7")),m=a("2Taf"),d=a.n(m),f=a("vZ4D"),p=a.n(f),h=a("l4Ni"),v=a.n(h),g=a("ujKo"),E=a.n(g),y=a("MhPg"),b=a.n(y),I=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),S=a.n(k),q=a("MuoO"),L=a("dPBl"),O=a("34ay"),D=a("OCLO"),V=a.n(D),w="personalInfo",j="majorInfo",M="educationInfo",A="academicSection",N=function(e){var t=e[w].information,a=e[j].majorList,n=e[M].educationList,r=e[A].list;return{academicSec:r,currentUserInfo:t,educationList:n,majorList:a}},C=(n=Object(q["connect"])(N,null),r=I["a"].create(),n(i=r((o=function(e){function t(e){var a;return d()(this,t),a=v()(this,E()(t).call(this,e)),a.generateMajorList=function(){if(!a.props.majorList)return null;for(var e=[],t=0;t<a.props.majorList.length;t++)e.push(S.a.createElement(u["a"].Option,{value:a.props.majorList[t].id},a.props.majorList[t].major));return e},a.generateEducationList=function(){if(!a.props.educationList)return null;for(var e=[],t=0;t<a.props.educationList.length;t++)e.push(S.a.createElement(u["a"].Option,{value:a.props.educationList[t].id},a.props.educationList[t].education));return e},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.major=t.major,n.education=t.education,n.title=t.title,n.officetel=t.officetel,a.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void c["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void c["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.state={information:void 0},a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(t){1===t.result&&(console.log(t),e.setState({information:t.information}))}}),this.props.dispatch({type:"".concat(A,"/queryList")}),this.props.dispatch({type:"".concat(M,"/queryEducationList")}),this.props.dispatch({type:"".concat(j,"/queryMajorList")})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.information?this.state.information.major:null,n=this.state.information?this.state.information.education:null,r=this.state.information?this.state.information.title:null,i=this.state.information?this.state.information.officetel:null;return"author"!=Object(O["a"])()[0]?S.a.createElement(L["a"],{to:"/account/profile"}):S.a.createElement("div",{className:V.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u4e13\u4e1a\u4fe1\u606f"},t("major",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u7684\u4e13\u4e1a"}]})(S.a.createElement(u["a"],null,this.generateMajorList()))),S.a.createElement(I["a"].Item,{label:"\u6559\u80b2\u4fe1\u606f"},t("education",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4f60\u7684\u6559\u80b2\u4fe1\u606f"}]})(S.a.createElement(u["a"],null,this.generateEducationList()))),S.a.createElement(I["a"].Item,{label:"\u5934\u8854"},t("title",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5934\u8854"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u5934\u8854"}))),S.a.createElement(I["a"].Item,{label:"\u529e\u516c\u5ba4\u7535\u8bdd"},t("officetel",{initialValue:i,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u8981\u6c42\u7684\u7535\u8bdd"}]})(S.a.createElement(l["a"],{placeholder:"\u529e\u516c\u5ba4\u7535\u8bdd\uff08\u8bf7\u5c06\u533a\u53f7\u548c\u7535\u8bdd\u4e00\u8d77\u8f93\u5165\uff0c\u65e0\u5206\u9694\u7b26\uff09"}))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmit},"\u66f4\u65b0"))))}}]),t}(S.a.Component),i=o))||i)||i);t["default"]=C},JhtZ:function(e,t,a){"use strict";a.r(t);var n,r,i,o=a("2Taf"),s=a.n(o),l=a("vZ4D"),c=a.n(l),u=a("l4Ni"),m=a.n(u),d=a("ujKo"),f=a.n(d),p=a("MhPg"),h=a.n(p),v=(a("lUTK"),a("BvKs")),g=a("q1tI"),E=a.n(g),y=a("MuoO"),b=a("usdK"),I=a("34ay"),k=a("v99g"),S=a("SK0R"),q=a.n(S),L="user",O=function(e){var t=e[L].currentUser;return{currentUser:t}},D=v["a"].Item,V=(n=Object(y["connect"])(O,null),n((i=function(e){function t(e){var a;s()(this,t),a=m()(this,f()(t).call(this,e)),a.getmenu=function(){var e=a.state.menuMap;return Object.keys(e).map(function(t){return E.a.createElement(D,{key:t},e[t])})},a.getRightTitle=function(){var e=a.state,t=e.selectKey,n=e.menuMap;return n[t]},a.selectKey=function(e){var t=e.key;b["a"].push("/account/profile/".concat(t)),a.setState({selectKey:t})},a.resize=function(){a.main&&requestAnimationFrame(function(){var e="inline",t=a.main.offsetWidth;a.main.offsetWidth<641&&t>400&&(e="horizontal"),window.innerWidth<768&&t>400&&(e="horizontal"),a.setState({mode:e})})};var n={},r=e.match,i=e.location;"author"==Object(I["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f",address:"\u5730\u5740\u4fe1\u606f",education:"\u6559\u80b2\u4fe1\u606f",academic:"\u5b66\u672f\u4fe1\u606f"}),"editor"==Object(I["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f"}),"referee"==Object(I["a"])()[0]&&(n={info:"\u57fa\u7840\u4fe1\u606f",address:"\u5730\u5740\u4fe1\u606f",academic:"\u5b66\u672f\u4fe1\u606f",bank:"\u94f6\u884c\u5361\u4fe1\u606f"});var o=i.pathname.replace("".concat(r.path,"/"),"");return a.state={menuMap:n,mode:"inline",selectKey:n[o]?o:"info"},a}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.currentUser;if(!n.information.id)return"";var r=this.state,i=r.mode,o=r.selectKey;return E.a.createElement(k["a"],null,E.a.createElement("div",{className:q.a.main,ref:function(t){e.main=t}},E.a.createElement("div",{className:q.a.leftmenu},E.a.createElement(v["a"],{mode:i,selectedKeys:[o],onClick:this.selectKey},this.getmenu())),E.a.createElement("div",{className:q.a.right},E.a.createElement("div",{className:q.a.title},this.getRightTitle()),a)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match,n=e.location,r=n.pathname.replace("".concat(a.path,"/"),"");return r=t.menuMap[r]?r:"info",r!==t.selectKey?{selectKey:r}:null}}]),t}(E.a.Component),r=i))||r);t["default"]=V},OCLO:function(e,t,a){e.exports={info:"antd-pro-pages-personal-management-settings-info-info",left:"antd-pro-pages-personal-management-settings-info-left",right:"antd-pro-pages-personal-management-settings-info-right",avatar_title:"antd-pro-pages-personal-management-settings-info-avatar_title",avatar:"antd-pro-pages-personal-management-settings-info-avatar",button_view:"antd-pro-pages-personal-management-settings-info-button_view"}},SK0R:function(e,t,a){e.exports={main:"antd-pro-pages-personal-management-settings-index-main",leftmenu:"antd-pro-pages-personal-management-settings-index-leftmenu",right:"antd-pro-pages-personal-management-settings-index-right",title:"antd-pro-pages-personal-management-settings-index-title"}},TVoW:function(e,t,a){"use strict";a.r(t);a("+L6B");var n,r,i,o,s=a("2/Rp"),l=(a("7Kak"),a("9yH6")),c=(a("5NDa"),a("5rEg")),u=(a("miYZ"),a("tsqr")),m=a("2Taf"),d=a.n(m),f=a("vZ4D"),p=a.n(f),h=a("l4Ni"),v=a.n(h),g=a("ujKo"),E=a.n(g),y=a("MhPg"),b=a.n(y),I=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),S=a.n(k),q=a("MuoO"),L=a("34ay"),O=a("OCLO"),D=a.n(O),V="personalInfo",w=function(e){var t=e[V].information;return{currentUserInfo:t}},j=(n=Object(q["connect"])(w,null),r=I["a"].create(),n(i=r((o=function(e){function t(e){var a;return d()(this,t),a=v()(this,E()(t).call(this,e)),a.handleSubmitAuthor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.name=t.name,n.name_pinyin=t.name_pinyin,n.gender=t.gender,n.phonenum=t.phonenum,n.introduction=t.introduction,a.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.handleSubmitEditor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.name=t.name,n.gender=t.gender,a.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.handleSubmitReferee=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.name=t.name,n.gender=t.gender,a.props.dispatch({type:"".concat(V,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.state={information:void 0},a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(V,"/queryPersonalInfo"),callback:function(t){1===t.result&&e.setState({information:t.information})}})}},{key:"render",value:function(){var e=this;if("author"==Object(L["a"])()[0]){var t=this.state.information?this.state.information.name:null,a=this.state.information?this.state.information.name_pinyin:null,n=this.state.information?this.state.information.gender:null,r=this.state.information?this.state.information.phonenum:null,i=this.state.information?this.state.information.introduction:null;return S.a.createElement("div",{className:D.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:D.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitAuthor,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.email:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d\uff08\u62fc\u97f3\uff09"},this.props.form.getFieldDecorator("name_pinyin",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d\u7684\u62fc\u97f3"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d\uff08\u62fc\u97f3\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(I["a"].Item,{label:"\u624b\u673a"},this.props.form.getFieldDecorator("phonenum",{initialValue:r,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u624b\u673a\u53f7"},{len:11,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u624b\u673a\u53f7"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),S.a.createElement(I["a"].Item,{label:"\u4ecb\u7ecd"},this.props.form.getFieldDecorator("introduction",{initialValue:i,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4ecb\u7ecd\u4fe1\u606f"},{max:300,message:"\u8bf7\u63a7\u5236\u5728300\u4e2a\u5b57\u7b26\u4ee5\u5185"}]})(S.a.createElement(c["a"].TextArea,{row:4,placeholder:"\u8bf7\u586b\u5199\u4ecb\u7ecd\u4fe1\u606f"}))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}if("editor"==Object(L["a"])()[0]){var o=this.state.information?this.state.information.name:null,u=this.state.information?this.state.information.gender:null;return S.a.createElement("div",{className:D.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:D.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitEditor,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.username:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}if("referee"==Object(L["a"])()[0]){var m=this.state.information?this.state.information.name:null,d=this.state.information?this.state.information.gender:null;return S.a.createElement("div",{className:D.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:D.a.left},S.a.createElement(I["a"],{layout:"vertical",onSubmit:this.handleSubmitReferee,hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u7528\u6237\u540d"},this.state.information?this.state.information.username:null),S.a.createElement(I["a"].Item,{label:"\u59d3\u540d"},this.props.form.getFieldDecorator("name",{initialValue:m,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(S.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),S.a.createElement(I["a"].Item,{label:"\u6027\u522b"},this.props.form.getFieldDecorator("gender",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(S.a.createElement(l["a"].Group,null,S.a.createElement(l["a"],{value:1},"\u7537"),S.a.createElement(l["a"],{value:2},"\u5973")))),S.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u66f4\u65b0"))))}}}]),t}(S.a.Component),i=o))||i)||i);t["default"]=j},x3fv:function(e,t,a){"use strict";a.r(t);a("+L6B");var n,r,i,o,s=a("2/Rp"),l=(a("5NDa"),a("5rEg")),c=(a("OaEy"),a("2fM7")),u=(a("miYZ"),a("tsqr")),m=a("2Taf"),d=a.n(m),f=a("vZ4D"),p=a.n(f),h=a("l4Ni"),v=a.n(h),g=a("ujKo"),E=a.n(g),y=a("MhPg"),b=a.n(y),I=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),S=a.n(k),q=a("MuoO"),L=a("dPBl"),O=a("34ay"),D=a("OCLO"),V=a.n(D),w="personalInfo",j="locationInfo",M=function(e){var t=e[w].information,a=e[j].locationList;return{currentUserInfo:t,locationList:a}},A=(n=Object(q["connect"])(M,null),r=I["a"].create(),n(i=r((o=function(e){function t(e){var a;return d()(this,t),a=v()(this,E()(t).call(this,e)),a.handleSubmitAuthor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.address=t.address,n.postcode=t.postcode,n.workspace_cn=t.workspace_cn,n.workspace_en=t.workspace_en,n.location=t.location,a.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.handleSubmitReferee=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.props.currentUserInfo;n.address=t.address,a.props.dispatch({type:"".concat(w,"/updatePersonalInfo"),payload:n,callback:function(e){return 1!=e.result?void u["a"].error("\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5"):void u["a"].success("\u4fee\u6539\u6210\u529f")}})}})},a.state={information:void 0},a}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"".concat(w,"/queryPersonalInfo"),callback:function(t){1===t.result&&e.setState({information:t.information})}}),this.props.dispatch({type:"".concat(j,"/queryLocationList")})}},{key:"generateLocationList",value:function(){if(!this.props.locationList)return null;for(var e=[],t=0;t<this.props.locationList.length;t++)e.push(S.a.createElement(c["a"].Option,{value:this.props.locationList[t].id},this.props.locationList[t].location));return e}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;if("author"==Object(O["a"])()[0]){var a=this.state.information?this.state.information.address:null,n=this.state.information?this.state.information.postcode:null,r=this.state.information?this.state.information.workspace_cn:null,i=this.state.information?this.state.information.workspace_en:null,o=this.state.information?this.state.information.location:null;return S.a.createElement("div",{className:V.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u8054\u7cfb\u5730\u5740"},t("address",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}))),S.a.createElement(I["a"].Item,{label:"\u90ae\u653f\u7f16\u7801"},t("postcode",{initialValue:n,rules:[{required:!0,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u90ae\u653f\u7f16\u7801"},{len:6,message:"\u8bf7\u8f93\u5165\u7b26\u5408\u89c4\u8303\u7684\u90ae\u653f\u7f16\u7801"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u653f\u7f16\u7801"}))),S.a.createElement(I["a"].Item,{label:"\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"},t("workspace_cn",{initialValue:r,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u4e2d\u6587\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"},t("workspace_en",{initialValue:i,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5355\u4f4d\uff08\u82f1\u6587\uff09"}))),S.a.createElement(I["a"].Item,{label:"\u5730\u70b9"},t("location",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u70b9\u4fe1\u606f"}]})(S.a.createElement(c["a"],null,this.generateLocationList()))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitAuthor},"\u66f4\u65b0"))))}if("referee"==Object(O["a"])()[0]){var u=this.state.information?this.state.information.address:null;return S.a.createElement("div",{className:V.a.info,ref:function(t){return e.view=t}},S.a.createElement("div",{className:V.a.left},S.a.createElement(I["a"],{layout:"vertical",hideRequiredMark:!0},S.a.createElement(I["a"].Item,{label:"\u8054\u7cfb\u5730\u5740"},t("address",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}]})(S.a.createElement(l["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u5730\u5740"}))),S.a.createElement(s["a"],{type:"primary",onClick:this.handleSubmitReferee},"\u66f4\u65b0"))))}return S.a.createElement(L["a"],{to:"/account/profile"})}}]),t}(S.a.Component),i=o))||i)||i);t["default"]=A}}]);