(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{G8YD:function(e,a,t){e.exports={stepForm:"antd-pro-pages-personal-management-modify-password-style-stepForm",stepFormText:"antd-pro-pages-personal-management-modify-password-style-stepFormText",desc:"antd-pro-pages-personal-management-modify-password-style-desc",result:"antd-pro-pages-personal-management-modify-password-style-result",information:"antd-pro-pages-personal-management-modify-password-style-information",label:"antd-pro-pages-personal-management-modify-password-style-label",money:"antd-pro-pages-personal-management-modify-password-style-money",uppercase:"antd-pro-pages-personal-management-modify-password-style-uppercase",error:"antd-pro-pages-personal-management-modify-password-style-error",success:"antd-pro-pages-personal-management-modify-password-style-success",warning:"antd-pro-pages-personal-management-modify-password-style-warning","progress-pass":"antd-pro-pages-personal-management-modify-password-style-progress-pass",progress:"antd-pro-pages-personal-management-modify-password-style-progress"}},Myu5:function(e,a,t){e.exports={modifyPwResult:"antd-pro-pages-personal-management-modify-password-result-modifyPwResult",title:"antd-pro-pages-personal-management-modify-password-result-title",actions:"antd-pro-pages-personal-management-modify-password-result-actions"}},QPNx:function(e,a,t){"use strict";t.r(a);t("+L6B");var r,s,n,o,l=t("2/Rp"),p=(t("Q9mQ"),t("diRs")),i=t("jehZ"),m=t.n(i),d=(t("5NDa"),t("5rEg")),c=(t("miYZ"),t("tsqr")),u=(t("MXD1"),t("CFYs")),f=t("2Taf"),g=t.n(f),y=t("vZ4D"),w=t.n(y),h=t("l4Ni"),v=t.n(h),E=t("ujKo"),P=t.n(E),b=t("MhPg"),F=t.n(b),N=(t("y8nQ"),t("Vl3Y")),x=t("q1tI"),k=t.n(x),I=t("Po8q"),S=t.n(I),q=t("MuoO"),Q=t("usdK"),D=t("dPBl"),C=t("G8YD"),T=t.n(C),M="modifyPw",R="modifyPwSafeQue",L=function(e){var a=e[M],t=e[R].result;return{modifyResult:a,safeQueResult:t}},j={labelCol:{span:5},wrapperCol:{span:19}},Z={good:k.a.createElement("div",{className:T.a.success},"\u5f3a\u5ea6\uff1a\u5f3a"),ok:k.a.createElement("div",{className:T.a.warning},"\u5f3a\u5ea6\uff1a\u4e2d"),poor:k.a.createElement("div",{className:T.a.error},"\u5f3a\u5ea6\uff1a\u5f31")},K={good:"success",ok:"normal",poor:"exception"},O=(r=Object(q["connect"])(L,null),s=N["a"].create(),r(n=s((o=function(e){function a(e){var t;return g()(this,a),t=v()(this,P()(a).call(this,e)),t.getPasswordStrengthLevel=function(){var e=t.props.form.getFieldValue("password"),a=/^\w*[A-Z]+\w*/,r=/^\w+/;return e&&e.length>15&&a.test(e)?"good":e&&e.length>=10&&r.test(e)?"ok":"poor"},t.checkPassword=function(e,a,r){if(a?t.setState({visable:!!a}):(t.setState({help:"\u8bf7\u8f93\u5165\u65b0\u7684\u5bc6\u7801",visable:!!a}),r("\u8bf7\u8f93\u5165\u5bc6\u7801")),a.length<10)r("\u5bc6\u7801\u957f\u5ea6\u8bf7\u5927\u4e8e\u7b49\u4e8e10\u4f4d");else{var s=t.props.form;a&&t.state.confirmDirty&&s.validateFields(["confirm"],{force:!0}),r()}},t.getProgressPercent=function(e){var a=K[t.getPasswordStrengthLevel()];return"exception"==a?20:"normal"==a?60:"success"==a?100:0},t.renderPasswordStrength=function(){var e=t.props.form,a=e.getFieldValue("password"),r=t.getPasswordStrengthLevel();return a&&a.length?k.a.createElement("div",{className:T.a["progress-".concat(r)]},k.a.createElement(u["a"],{status:K[r],className:T.a.progress,strokeWidth:6,percent:t.getProgressPercent(a),showInfo:!1})):null},t.checkConfirm=function(e,a,r){a&&a!==t.props.form.getFieldValue("newPassword")?r("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"):r()},t.state={confirmDirty:!1,visable:!1,help:""},t}return F()(a,e),w()(a,[{key:"render",value:function(){var e=this,a=this.props.form,t=a.getFieldDecorator,r=a.validateFields,s=function(){r(function(a,t){if(!a){var r={oldpwd:t.oldPw,newpwd:t.newPassword};e.props.dispatch({type:"".concat(M,"/queryModifyPw"),payload:r,callback:function(e){1==e.result?(S.a.remove("password"),S.a.save("password",t.newPassword),Q["a"].push("/account/modifypassword/result")):c["a"].error(e.reason)}})}})};return"undefined"==typeof this.props.safeQueResult||1!==this.props.safeQueResult?k.a.createElement(D["a"],{to:"/account/modifypassword/"}):k.a.createElement(N["a"],{layout:"horizontal",className:T.a.stepForm},k.a.createElement(N["a"].Item,m()({},j,{className:T.a.stepFormText,label:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}),t("oldPw",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}]})(k.a.createElement(d["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}))),k.a.createElement(N["a"].Item,m()({},j,{className:T.a.stepFormText,label:"\u8bf7\u8f93\u5165\u65b0\u7684\u5bc6\u7801"}),k.a.createElement(p["a"],{getPopupContainer:function(e){return e.parentNode},content:k.a.createElement("div",{style:{padding:"4px 0"}},Z[this.getPasswordStrengthLevel()],this.renderPasswordStrength(),k.a.createElement("div",{style:{marginTop:10}},"\u8bf7\u8f93\u5165\u81f3\u5c1110\u4e2a\u5b57\u7b26\u7684\u5bc6\u7801\uff0c\u5305\u62ec\u5b57\u6bcd\u548c\u6570\u5b57\uff0c\u5efa\u8bae\u5305\u542b\u5927\u5199\u5b57\u6bcd\u3002")),overlayStyle:{width:240},placement:"right",visible:this.state.visable},t("newPassword",{rules:[{validator:this.checkPassword}]})(k.a.createElement(d["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})))),k.a.createElement(N["a"].Item,m()({},j,{className:T.a.stepFormText,label:"\u8bf7\u518d\u8f93\u5165\u4e00\u6b21"}),t("confirm",{rules:[{required:!0,message:"\u9700\u8981\u518d\u8f93\u5165\u4e00\u6b21\u65b0\u5bc6\u7801"},{validator:this.checkConfirm}]})(k.a.createElement(d["a"],{type:"password",placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"}))),k.a.createElement(l["a"],{type:"primary",onClick:s},"\u63d0\u4ea4"))}}]),a}(k.a.Component),n=o))||n)||n);a["default"]=O},S89W:function(e,a,t){"use strict";t.r(a);t("IzEo");var r=t("bx4M"),s=t("2Taf"),n=t.n(s),o=t("vZ4D"),l=t.n(o),p=t("l4Ni"),i=t.n(p),m=t("ujKo"),d=t.n(m),c=t("MhPg"),u=t.n(c),f=(t("FJo9"),t("L41K")),g=t("q1tI"),y=t.n(g),w=t("zHco"),h=t("i2N+"),v=t.n(h),E=f["a"].Step,P=function(e){function a(){return n()(this,a),i()(this,d()(a).apply(this,arguments))}return u()(a,e),l()(a,[{key:"getCurrentStep",value:function(){var e=this.props.location,a=e.pathname,t=a.split("/");switch(t[t.length-1]){case"safequestions":return 0;case"newpassword":return 1;case"result":return 2;default:return 0}}},{key:"render",value:function(){return y.a.createElement(w["a"],{title:"\u4fee\u6539\u5bc6\u7801",tabActiveKey:this.props.location.pathname,content:"\u8bf7\u6309\u7167\u6307\u5f15\u5b8c\u6210\u5bc6\u7801\u4fee\u6539\u5de5\u4f5c"},y.a.createElement(r["a"],{bordered:!1},y.a.createElement(g["Fragment"],null,y.a.createElement(f["a"],{current:this.getCurrentStep(),className:v.a.steps},y.a.createElement(E,{title:"\u56de\u7b54\u5b89\u5168\u95ee\u9898"}),y.a.createElement(E,{title:"\u8bbe\u7f6e\u65b0\u5bc6\u7801"}),y.a.createElement(E,{title:"\u5b8c\u6210"})),this.props.children)))}}]),a}(y.a.Component);a["default"]=P},UaJn:function(e,a,t){"use strict";t.r(a);t("+L6B");var r,s,n=t("2/Rp"),o=t("2Taf"),l=t.n(o),p=t("vZ4D"),i=t.n(p),m=t("l4Ni"),d=t.n(m),c=t("ujKo"),u=t.n(c),f=t("MhPg"),g=t.n(f),y=t("q1tI"),w=t.n(y),h=t("MuoO"),v=t("mOP9"),E=t("ALo4"),P=t("Myu5"),b=t.n(P),F="modifyPw",N=function(e){var a=e[F].result;return{modifyResult:a}},x=(r=Object(h["connect"])(N,null),r(s=function(e){function a(){return l()(this,a),d()(this,u()(a).apply(this,arguments))}return g()(a,e),i()(a,[{key:"componentDidMount",value:function(){"undefined"!=typeof this.props.modifyResult&&1===this.props.modifyResult||router.push("/account/modifypassword")}},{key:"render",value:function(){return w.a.createElement(E["a"],{className:b.a.modifyPwResult,type:"success",title:w.a.createElement("div",{className:b.a.title},"\u60a8\u7684\u5bc6\u7801\u5df2\u4fee\u6539\u5b8c\u6bd5\u3002"),actions:w.a.createElement("div",{className:b.a.actions},w.a.createElement(v["a"],{to:"/dashboard"},w.a.createElement(n["a"],{size:"large",type:"primary"},"\u8fd4\u56de\u63a7\u5236\u53f0")))})}}]),a}(w.a.Component))||s);a["default"]=x},erD9:function(e,a,t){"use strict";t.r(a);t("+L6B");var r,s,n,o=t("2/Rp"),l=(t("5NDa"),t("5rEg")),p=t("jehZ"),i=t.n(p),m=(t("miYZ"),t("tsqr")),d=t("2Taf"),c=t.n(d),u=t("vZ4D"),f=t.n(u),g=t("l4Ni"),y=t.n(g),w=t("ujKo"),h=t.n(w),v=t("MhPg"),E=t.n(v),P=(t("y8nQ"),t("Vl3Y")),b=t("q1tI"),F=t.n(b),N=t("MuoO"),x=t("34ay"),k=t("G8YD"),I=t.n(k),S=t("usdK"),q="modifyPwSafeQue",Q="user",D=function(e){var a=e[q],t=e[Q].currentUser;return{currentUser:t,safeQuestion:a}},C={labelCol:{span:5},wrapperCol:{span:19}},T=function(){var e=Object(x["a"])();return"admin"==e?0:"author"==e?1:"editor"==e?3:"referee"==e?4:-1},M=(r=Object(N["connect"])(D,null),s=P["a"].create(),r(n=s(n=function(e){function a(){return c()(this,a),y()(this,h()(a).apply(this,arguments))}return E()(a,e),f()(a,[{key:"componentDidMount",value:function(){var e={username:sessionStorage.getItem("username"),role:T()};this.props.dispatch({type:"".concat(q,"/querySafeQuestion"),payload:e})}},{key:"render",value:function(){var e=this,a=this.props.form,t=a.getFieldDecorator,r=a.validateFields,s=function(){r(function(a,t){var r={answer1:t.answer1,answer2:t.answer2,answer3:t.answer3,username:sessionStorage.getItem("username"),role:T()};a||e.props.dispatch({type:"".concat(q,"/verifySafeAnswers"),payload:r,callback:function(e){1!=e?m["a"].error("\u5bc6\u4fdd\u95ee\u9898\u9519\u8bef"):S["a"].push("/account/modifypassword/newpassword")}})})};return F.a.createElement(P["a"],{layout:"horizontal",className:I.a.stepForm},F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u5bc6\u4fdd\u95ee\u98981\uff1a"}),this.props.safeQuestion?this.props.safeQuestion.que1:null),F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u7b54\u68481\uff1a"}),t("answer1",{rules:[{required:!0,message:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98981"}]})(F.a.createElement(l["a"],{placeholder:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98981"}))),F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u5bc6\u4fdd\u95ee\u98982\uff1a"}),this.props.safeQuestion?this.props.safeQuestion.que2:null),F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u7b54\u68482\uff1a"}),t("answer2",{rules:[{required:!0,message:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98982"}]})(F.a.createElement(l["a"],{placeholder:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98982"}))),F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u5bc6\u4fdd\u95ee\u98983\uff1a"}),this.props.safeQuestion?this.props.safeQuestion.que3:null),F.a.createElement(P["a"].Item,i()({},C,{className:I.a.stepFormText,label:"\u7b54\u68483\uff1a"}),t("answer3",{rules:[{required:!0,message:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98983"}]})(F.a.createElement(l["a"],{placeholder:"\u8bf7\u56de\u7b54\u5bc6\u4fdd\u95ee\u98983"}))),F.a.createElement(o["a"],{type:"primary",onClick:s},"\u4e0b\u4e00\u6b65"))}}]),a}(F.a.Component))||n)||n);a["default"]=M},"i2N+":function(e,a,t){e.exports={card:"antd-pro-pages-personal-management-modify-password-index-card",heading:"antd-pro-pages-personal-management-modify-password-index-heading",steps:"antd-pro-pages-personal-management-modify-password-index-steps",errorIcon:"antd-pro-pages-personal-management-modify-password-index-errorIcon",errorPopover:"antd-pro-pages-personal-management-modify-password-index-errorPopover",errorListItem:"antd-pro-pages-personal-management-modify-password-index-errorListItem",errorField:"antd-pro-pages-personal-management-modify-password-index-errorField",editable:"antd-pro-pages-personal-management-modify-password-index-editable",advancedForm:"antd-pro-pages-personal-management-modify-password-index-advancedForm",optional:"antd-pro-pages-personal-management-modify-password-index-optional"}}}]);