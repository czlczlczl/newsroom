(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{"0Hqo":function(e,a,t){"use strict";t.r(a);t("IzEo");var n,s,d,c,i,o,r,l,p,u,m=t("bx4M"),h=(t("+L6B"),t("2/Rp")),g=(t("miYZ"),t("tsqr")),f=(t("/zsF"),t("PArb")),b=t("jehZ"),y=t.n(b),V=(t("5NDa"),t("5rEg")),v=t("2Taf"),S=t.n(v),M=t("vZ4D"),A=t.n(M),w=t("l4Ni"),R=t.n(w),C=t("ujKo"),E=t.n(C),k=t("MhPg"),L=t.n(k),D=(t("y8nQ"),t("Vl3Y")),F=(t("2qtc"),t("kLXV")),O=t("q1tI"),I=t.n(O),x=t("MuoO"),U=t("CkN6"),B=t("zHco"),q=t("2JR9"),P=t.n(q),T="adminAcademicSection",N=function(e){var a=e[T].pageBean,t=e[T].rows,n=e[T].loading;return{loading:n,pageBean:a,rows:t}},j=function(e,a){var t=e.map(function(e){return e.academicsec}),n=t.join(", ");F["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u4ee5\u4e0b\u5b66\u672f\u9886\u57df",content:n,okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){a(e)}})},z={labelCol:{span:7},wrapperCol:{span:13}},J=(n=D["a"].create(),n((d=function(e){function a(e){var t;return S()(this,a),t=R()(this,E()(a).call(this,e)),t.handleAddModal=function(e){e.preventDefault();var a=t.props.handleAdd;t.props.form.validateFields(function(e,t){e||a({academicsec:t.academicsec})})},t.state={formVals:{academicsec:t.props.values.academicsec},visible:!1},t}return L()(a,e),A()(a,[{key:"render",value:function(){var e=this;return this.props.isAddSuccess&&(this.setState({formVals:{},visible:!1}),this.props.handleChangeIsAddSuccess(!1)),I.a.createElement(F["a"],{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u6dfb\u52a0\u65b0\u5b66\u672f\u9886\u57df",visible:this.props.addModalVisible,onOk:this.handleAddModal,onCancel:function(){return e.props.handleAddModalVisible(!1,e.props.values)},afterClose:function(){e.props.handleAddModalVisible()}},I.a.createElement(D["a"].Item,y()({},z,{label:"\u5b66\u672f\u9886\u57df\u540d\u79f0"}),this.props.form.getFieldDecorator("academicsec",{initialValue:this.state.formVals.academicsec,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u7684\u5b66\u672f\u9886\u57df\u540d\u79f0"}]})(I.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u5b66\u672f\u9886\u57df\u540d\u79f0"}))))}}]),a}(I.a.Component),s=d))||s),Z=(c=D["a"].create(),c((o=function(e){function a(e){var t;return S()(this,a),t=R()(this,E()(a).call(this,e)),t.handleUpdateModal=function(e){e.preventDefault();var a=t.props,n=(a.form,a.handleUpdate);t.props.form.validateFields(function(e,a){e||n({id:t.props.record.id,academicsec:a.academicsec})})},t.state={formVals:{id:t.props.record?t.props.record.id:0,academicsec:t.props.record?t.props.record.academicsec:""}},t}return L()(a,e),A()(a,[{key:"render",value:function(){var e=this;return I.a.createElement(F["a"],{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u4fee\u6539\u5b66\u672f\u9886\u57df",onOk:this.handleUpdateModal,visible:this.props.updateModalVisible,onCancel:function(){e.props.handleUpdateModalVisible()}},I.a.createElement(D["a"].Item,y()({},z,{label:"\u5185\u90e8ID"}),this.props.record.id),I.a.createElement(D["a"].Item,y()({},z,{label:"\u5b66\u672f\u9886\u57df\u540d\u79f0"}),this.props.form.getFieldDecorator("academicsec",{initialValue:this.props.record.academicsec,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u7684\u5b66\u672f\u9886\u57df\u540d\u79f0"}]})(I.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u5b66\u672f\u9886\u57df\u540d\u79f0"}))))}}]),a}(I.a.Component),i=o))||i),H=(r=Object(x["connect"])(N,null),l=D["a"].create(),r(p=l((u=function(e){function a(e){var t;return S()(this,a),t=R()(this,E()(a).call(this,e)),t.handleUpdateOneRecord=function(e,a){t.setState({updateModalVisible:!!e,updateRecord:a||{}})},t.columns=[{title:"\u5185\u90e8ID",dataIndex:"id"},{title:"\u5b66\u672f\u9886\u57df",dataIndex:"academicsec"},{title:"\u64cd\u4f5c",render:function(e,a){return I.a.createElement(O["Fragment"],null,I.a.createElement("a",{onClick:function(){return t.handleUpdateOneRecord(!0,a)}},"\u4fee\u6539"),I.a.createElement(f["a"],{type:"vertical"}),I.a.createElement("a",{onClick:function(){return t.handleDeleteRecordOneLine(!0,a)}},"\u5220\u9664"))}}],t.handleAddModalVisible=function(e,a){t.setState({addModalVisible:!!e,stepFormValues:a||{}})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e,updateRecord:a||{}})},t.deleteFunc=function(e){new Promise(function(a,n){for(var s=function(a){var n={id:e[a].id},s=e[a];t.props.dispatch({type:"".concat(T,"/deleteOneSec"),payload:n,callback:function(e){1!=e.result&&g["a"].error("\u6761\u76ee\u5220\u9664\u5931\u8d25\uff1a".concat(s.academicsec))}})},d=0;d<e.length;d++)s(d);a()}).then(function(){var e={page:t.props.pageBean.currentPage};t.props.dispatch({type:"".concat(T,"/querySec"),payload:e})})},t.handleDeleteRecordOneLine=function(e,a){t.setState({oneLineDeleteModalVisible:!!e,oneLineRecordValue:a||{}}),j([a],t.deleteFunc)},t.handleDeleteRecordLines=function(e){e.preventDefault(),j(t.state.selectedRows,t.deleteFunc)},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleChangeIsAddSuccess=function(e){t.setState({isAddSuccess:e})},t.handleAdd=function(e){var a=!1,n={academicsec:e.academicsec};return t.props.dispatch({type:"".concat(T,"/addSec"),payload:n,callback:function(e){if(1!=e.result)g["a"].error("\u6dfb\u52a0\u9519\u8bef");else{g["a"].success("\u6dfb\u52a0\u6210\u529f"),t.handleAddModalVisible(),t.handleChangeIsAddSuccess(!0);var a={page:t.props.pageBean.currentPage};t.props.dispatch({type:"".concat(T,"/querySec"),payload:a})}}}),a},t.handleStandardTableChange=function(e,a,n){var s=t.props.dispatch,d={page:e.current};s({type:"".concat(T,"/querySec"),payload:d})},t.handleUpdate=function(e){var a=!1,n={id:e.id,academicsec:e.academicsec};return t.props.dispatch({type:"".concat(T,"/updateSec"),payload:n,callback:function(e){if(1!=e.result)g["a"].error("\u66f4\u65b0\u9519\u8bef");else{g["a"].success("\u66f4\u65b0\u6210\u529f"),t.handleUpdateModalVisible();var a={page:t.props.pageBean.currentPage};t.props.dispatch({type:"".concat(T,"/querySec"),payload:a})}}}),a},t.state={modalVisible:!1,addModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},updateModalVisible:!1,updateRecord:{},isAddSuccess:!1,oneLineDeleteModalVisible:{},oneLineRecordValue:{}},t}return L()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e={page:1};this.props.dispatch({type:"".concat(T,"/querySec"),payload:e})}},{key:"render",value:function(){var e=this,a={list:this.props.rows,pagination:{total:this.props.pageBean?this.props.pageBean.total:0,pageSize:10,current:this.props.pageBean?this.props.pageBean.currentPage:1}},t={handleAddModalVisible:this.handleAddModalVisible,handleAdd:this.handleAdd},n={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},s=this.props.loading;return I.a.createElement(B["a"],{title:"\u5b66\u672f\u9886\u57df\u7ba1\u7406"},I.a.createElement(m["a"],{bordered:!1},I.a.createElement("div",{className:P.a.tableList},I.a.createElement("div",{className:P.a.tableListOperator},I.a.createElement(h["a"],{icon:"plus",type:"primary",onClick:function(){return e.handleAddModalVisible(!0)}},"\u65b0\u589e"),this.state.selectedRows.length>0&&I.a.createElement("span",null,I.a.createElement(h["a"],{onClick:this.handleDeleteRecordLines},"\u6279\u91cf\u5220\u9664"))),I.a.createElement(U["a"],{selectedRows:this.state.selectedRows,loading:s,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),I.a.createElement(J,y()({},t,{addModalVisible:this.state.addModalVisible,values:this.state.stepFormValues,isAddSuccess:this.state.isAddSuccess,handleChangeIsAddSuccess:this.handleChangeIsAddSuccess})),I.a.createElement(Z,y()({},n,{updateModalVisible:this.state.updateModalVisible,record:this.state.updateRecord})))}}]),a}(I.a.Component),p=u))||p)||p);a["default"]=H},"2JR9":function(e,a,t){e.exports={tableList:"antd-pro-pages-system-management-academic-section-tableList",tableListOperator:"antd-pro-pages-system-management-academic-section-tableListOperator",tableListForm:"antd-pro-pages-system-management-academic-section-tableListForm",submitButtons:"antd-pro-pages-system-management-academic-section-submitButtons",error:"antd-pro-pages-system-management-academic-section-error",success:"antd-pro-pages-system-management-academic-section-success",warning:"antd-pro-pages-system-management-academic-section-warning","progress-pass":"antd-pro-pages-system-management-academic-section-progress-pass",progress:"antd-pro-pages-system-management-academic-section-progress"}}}]);