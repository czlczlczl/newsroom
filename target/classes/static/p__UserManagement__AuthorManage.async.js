(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{"0HrW":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,o,s=a("bx4M"),c=(a("lUTK"),a("BvKs")),i=(a("14J3"),a("BMrR")),u=(a("+L6B"),a("2/Rp")),d=(a("jCWc"),a("kPKH")),p=(a("5NDa"),a("5rEg")),m=a("p0pE"),h=a.n(m),f=(a("miYZ"),a("tsqr")),g=(a("/zsF"),a("PArb")),y=a("2Taf"),v=a.n(y),E=a("vZ4D"),b=a.n(E),k=a("l4Ni"),w=a.n(k),R=a("ujKo"),V=a.n(R),F=a("MhPg"),L=a.n(F),D=(a("y8nQ"),a("Vl3Y")),S=(a("2qtc"),a("kLXV")),C=a("q1tI"),U=a.n(C),M=a("MuoO"),T=a("usdK"),x=a("CkN6"),B=a("zHco"),I=a("ajhq"),P=a.n(I),O="userManageAuthorList",q=function(e){var t=e[O].pageBean,a=e[O].rows,n=e[O].loading;return{loading:n,pageBean:t,rows:a}},N=function(e,t){var a=e.map(function(e){return e.email}),n=a.join(", ");S["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u4ee5\u4e0b\u89d2\u8272",content:n,okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){t(e)}})},j=function(e,t){var a=e.map(function(e){return e.email}),n=a.join(", ");S["a"].confirm({title:"\u8bf7\u786e\u8ba4\u91cd\u7f6e\u4ee5\u4e0b\u89d2\u8272\u7684\u5bc6\u7801\uff08\u91cd\u7f6e\u4e3a12345678\uff09\uff1a",content:n,okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){t(e)}})},K=(n=Object(M["connect"])(q,null),r=D["a"].create(),n(l=r((o=function(e){function t(e){var a;return v()(this,t),a=w()(this,V()(t).call(this,e)),a.getAuthorItem=function(e){T["a"].push("/userdetail/author/".concat(e))},a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"email",render:function(e){return U.a.createElement("a",{onClick:function(){return a.getAuthorItem(e)}},e)}},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u6027\u522b",dataIndex:"gender",render:function(e){return 1==e?"\u7537":"\u5973"}},{title:"\u5de5\u4f5c\u5355\u4f4d",dataIndex:"workspace_cn"},{title:"\u64cd\u4f5c",render:function(e,t){return U.a.createElement(C["Fragment"],null,U.a.createElement("a",{onClick:function(){return a.handleResetPasswordOneLine(t)}},"\u91cd\u7f6e\u5bc6\u7801"),U.a.createElement(g["a"],{type:"vertical"}),U.a.createElement("a",{onClick:function(){return a.handleDeleteRecordOneLine(!0,t)}},"\u5220\u9664"))}}],a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.resetUserFunc=function(e){for(var t=function(t){var n={username:e[t].email,role:1};a.props.dispatch({type:"".concat(O,"/resetPw"),payload:n,callback:function(e){1!=e.result&&f["a"].error("\u5bc6\u7801\u91cd\u7f6e\u5931\u8d25\uff1a".concat(n.username))}})},n=0;n<e.length;n++)t(n)},a.handleResetPasswordOneLine=function(e){j([e],a.resetUserFunc)},a.handleResetPasswordLines=function(e){e.preventDefault(),j(a.state.selectedRows,a.resetUserFunc)},a.deleteUserFunc=function(e){new Promise(function(t,n){for(var r=function(t){var n={usernameToDelete:e[t].email,role:1};a.props.dispatch({type:"".concat(O,"/deleteOneUser"),payload:n,callback:function(e){1!=e.result&&f["a"].error("\u7528\u6237\u5220\u9664\u5931\u8d25\uff1a".concat(n.usernameToDelete))}})},l=0;l<e.length;l++)r(l);t()}).then(function(){var e={role:1,email:a.state.formValues.email,name:a.state.formValues.name,page:a.props.pageBean.currentPage};a.props.dispatch({type:"".concat(O,"/queryUser"),payload:e})})},a.handleDeleteRecordOneLine=function(e,t){a.setState({oneLineDeleteModalVisible:!!e,oneLineRecordValue:t||{}}),N([t],a.deleteUserFunc)},a.handleDeleteRecordLines=function(e){e.preventDefault(),N(a.state.selectedRows,a.deleteUserFunc)},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=h()({},t);a.setState({formValues:n});var r=h()({},n,{page:1,role:1});a.props.dispatch({type:"".concat(O,"/queryUser"),payload:r})}})},a.handleFormReset=function(){a.props.form.resetFields(),a.setState({formValues:{}});var e={page:1,role:1};a.props.dispatch({type:"".concat(O,"/queryUser"),payload:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,l=a.state.formValues,o=h()({role:1,page:e.current},l);r({type:"".concat(O,"/queryUser"),payload:o})},a.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},oneLineDeleteModalVisible:{},oneLineRecordValue:{}},a}return L()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e={role:1,page:1};this.props.dispatch({type:"".concat(O,"/queryUser"),payload:e})}},{key:"renderForm",value:function(){var e=this.props.form.getFieldDecorator;return U.a.createElement(D["a"],{onSubmit:this.handleSearch,layout:"inline"},U.a.createElement(i["a"],{gutter:{md:8,lg:24,xl:48}},U.a.createElement(d["a"],{md:8,sm:24},U.a.createElement(D["a"].Item,{label:"\u7528\u6237\u540d"},e("email")(U.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})))),U.a.createElement(d["a"],{md:8,sm:24},U.a.createElement(D["a"].Item,{label:"\u59d3\u540d"},e("name")(U.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"})))),U.a.createElement(d["a"],{md:8,sm:24},U.a.createElement("span",{className:P.a.submitButtons},U.a.createElement(u["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),U.a.createElement(u["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u6e05\u7a7a")))))}},{key:"render",value:function(){var e={list:this.props.rows,pagination:{total:this.props.pageBean?this.props.pageBean.total:0,pageSize:10,current:this.props.pageBean?this.props.pageBean.currentPage:1}},t=(U.a.createElement(c["a"],{onClick:this.handleMenuClick,selectedKeys:[]},U.a.createElement(c["a"].Item,{key:"remove"},"\u5220\u9664")),this.props.loading);return U.a.createElement(B["a"],{title:"\u4f5c\u8005\u7ba1\u7406"},U.a.createElement(s["a"],{bordered:!1},U.a.createElement("div",{className:P.a.tableList},U.a.createElement("div",{className:P.a.tableListForm},this.renderForm()),U.a.createElement("div",{className:P.a.tableListOperator},this.state.selectedRows.length>0&&U.a.createElement("span",null,U.a.createElement(u["a"],{onClick:this.handleDeleteRecordLines},"\u6279\u91cf\u5220\u9664"),U.a.createElement(u["a"],{onClick:this.handleResetPasswordLines},"\u6279\u91cf\u91cd\u7f6e"))),U.a.createElement(x["a"],{selectedRows:this.state.selectedRows,loading:t,data:e,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))))}}]),t}(U.a.Component),l=o))||l)||l);t["default"]=K}}]);