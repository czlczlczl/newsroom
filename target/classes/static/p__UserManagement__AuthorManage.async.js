(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[76],{"0HrW":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,o,s=a("bx4M"),c=(a("lUTK"),a("BvKs")),i=a("jehZ"),u=a.n(i),d=(a("14J3"),a("BMrR")),p=(a("+L6B"),a("2/Rp")),m=(a("jCWc"),a("kPKH")),h=(a("5NDa"),a("5rEg")),f=a("p0pE"),g=a.n(f),y=(a("miYZ"),a("tsqr")),v=(a("/zsF"),a("PArb")),E=a("2Taf"),w=a.n(E),b=a("vZ4D"),k=a.n(b),R=a("l4Ni"),V=a.n(R),F=a("ujKo"),L=a.n(F),C=a("MhPg"),S=a.n(C),D=(a("y8nQ"),a("Vl3Y")),U=(a("2qtc"),a("kLXV")),M=a("q1tI"),T=a.n(M),x=a("MuoO"),B=a("usdK"),I=a("CkN6"),P=a("zHco"),O=a("ajhq"),q=a.n(O),j="userManageAuthorList",N=function(e){var t=e[j].pageBean,a=e[j].rows,n=e[j].loading;return{loading:n,pageBean:t,rows:a}},K=function(e,t){var a=e.map(function(e){return e.email}),n=a.join(", ");U["a"].confirm({title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u4ee5\u4e0b\u89d2\u8272",content:n,okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){t(e)}})},z=function(e,t){var a=e.map(function(e){return e.email}),n=a.join(", ");U["a"].confirm({title:"\u8bf7\u786e\u8ba4\u91cd\u7f6e\u4ee5\u4e0b\u89d2\u8272\u7684\u5bc6\u7801\uff08\u91cd\u7f6e\u4e3a12345678\uff09\uff1a",content:n,okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){t(e)}})},A=(n=Object(x["connect"])(N,null),r=D["a"].create(),n(l=r((o=function(e){function t(e){var a;return w()(this,t),a=V()(this,L()(t).call(this,e)),a.getAuthorItem=function(e){B["a"].push("/userdetail/author/".concat(e))},a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"email",render:function(e){return T.a.createElement("a",{onClick:function(){return a.getAuthorItem(e)}},e)}},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u6027\u522b",dataIndex:"gender",render:function(e){return 1==e?"\u7537":"\u5973"}},{title:"\u5de5\u4f5c\u5355\u4f4d",dataIndex:"workspace_cn"},{title:"\u64cd\u4f5c",render:function(e,t){return T.a.createElement(M["Fragment"],null,T.a.createElement("a",{onClick:function(){return a.handleResetPasswordOneLine(t)}},"\u91cd\u7f6e\u5bc6\u7801"),T.a.createElement(v["a"],{type:"vertical"}),T.a.createElement("a",{onClick:function(){return a.handleDeleteRecordOneLine(!0,t)}},"\u5220\u9664"))}}],a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,stepFormValues:t||{}})},a.resetUserFunc=function(e){for(var t=function(t){var n={username:e[t].email,role:1};a.props.dispatch({type:"".concat(j,"/resetPw"),payload:n,callback:function(e){1!=e.result&&y["a"].error("\u5bc6\u7801\u91cd\u7f6e\u5931\u8d25\uff1a".concat(n.username))}})},n=0;n<e.length;n++)t(n)},a.handleResetPasswordOneLine=function(e){z([e],a.resetUserFunc)},a.handleResetPasswordLines=function(e){e.preventDefault(),z(a.state.selectedRows,a.resetUserFunc)},a.deleteUserFunc=function(e){new Promise(function(t,n){for(var r=function(t){var n={usernameToDelete:e[t].email,role:1};a.props.dispatch({type:"".concat(j,"/deleteOneUser"),payload:n,callback:function(e){1!=e.result&&y["a"].error("\u7528\u6237\u5220\u9664\u5931\u8d25\uff1a".concat(n.usernameToDelete))}})},l=0;l<e.length;l++)r(l);t()}).then(function(){var e={role:1,email:a.state.formValues.email,name:a.state.formValues.name,page:a.props.pageBean.currentPage};a.props.dispatch({type:"".concat(j,"/queryUser"),payload:e})})},a.handleDeleteRecordOneLine=function(e,t){a.setState({oneLineDeleteModalVisible:!!e,oneLineRecordValue:t||{}}),K([t],a.deleteUserFunc)},a.handleDeleteRecordLines=function(e){e.preventDefault(),K(a.state.selectedRows,a.deleteUserFunc)},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=g()({},t);a.setState({formValues:n});var r=g()({},n,{page:1,role:1});a.props.dispatch({type:"".concat(j,"/queryUser"),payload:r})}})},a.handleFormReset=function(){a.props.form.resetFields(),a.setState({formValues:{}});var e={page:1,role:1};a.props.dispatch({type:"".concat(j,"/queryUser"),payload:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,l=a.state.formValues,o=g()({role:1,page:e.current},l);r({type:"".concat(j,"/queryUser"),payload:o})},a.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{},oneLineDeleteModalVisible:{},oneLineRecordValue:{}},a}return S()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e={role:1,page:1};this.props.dispatch({type:"".concat(j,"/queryUser"),payload:e})}},{key:"renderForm",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:4},wrapperCol:{span:20}};return T.a.createElement(D["a"],u()({onSubmit:this.handleSearch},t),T.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},T.a.createElement(m["a"],{md:8,sm:24},T.a.createElement(D["a"].Item,{label:"\u7528\u6237\u540d"},e("email")(T.a.createElement(h["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})))),T.a.createElement(m["a"],{md:8,sm:24},T.a.createElement(D["a"].Item,{label:"\u59d3\u540d"},e("name")(T.a.createElement(h["a"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"})))),T.a.createElement(m["a"],{md:8,sm:24},T.a.createElement("span",{className:q.a.submitButtons},T.a.createElement(p["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),T.a.createElement(p["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u6e05\u7a7a")))))}},{key:"render",value:function(){var e={list:this.props.rows,pagination:{total:this.props.pageBean?this.props.pageBean.total:0,pageSize:10,current:this.props.pageBean?this.props.pageBean.currentPage:1}},t=(T.a.createElement(c["a"],{onClick:this.handleMenuClick,selectedKeys:[]},T.a.createElement(c["a"].Item,{key:"remove"},"\u5220\u9664")),this.props.loading);return T.a.createElement(P["a"],{title:"\u4f5c\u8005\u7ba1\u7406"},T.a.createElement(s["a"],{bordered:!1},T.a.createElement("div",{className:q.a.tableList},T.a.createElement("div",{className:q.a.tableListForm},this.renderForm()),T.a.createElement("div",{className:q.a.tableListOperator},this.state.selectedRows.length>0&&T.a.createElement("span",null,T.a.createElement(p["a"],{onClick:this.handleDeleteRecordLines},"\u6279\u91cf\u5220\u9664"),T.a.createElement(p["a"],{onClick:this.handleResetPasswordLines},"\u6279\u91cf\u91cd\u7f6e"))),T.a.createElement(I["a"],{selectedRows:this.state.selectedRows,loading:t,data:e,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,useSelectionRow:!0}))))}}]),t}(T.a.Component),l=o))||l)||l);t["default"]=A}}]);