(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{MKG8:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,s,l,o,c,p,d,u,m,h,f,v,E,k,g=a("bx4M"),y=(a("FJo9"),a("L41K")),b=(a("14J3"),a("BMrR")),S=(a("jCWc"),a("kPKH")),N=(a("+L6B"),a("2/Rp")),I=(a("5NDa"),a("5rEg")),D=(a("BoS7"),a("Sdc0")),C=(a("miYZ"),a("tsqr")),w=a("2Taf"),F=a.n(w),_=a("vZ4D"),x=a.n(_),O=a("l4Ni"),J=a.n(O),M=a("ujKo"),j=a.n(M),q=a("MhPg"),A=a.n(q),B=(a("y8nQ"),a("Vl3Y")),T=a("q1tI"),V=a.n(T),z=a("MuoO"),P=a("wd/R"),R=a.n(P),L=a("usdK"),K=a("+kNj"),W=a("Yaqk"),Y=a("zHco"),H=a("tpv8"),Z=a.n(H),G="academicSection",Q="authorDetailPublicStorage",U=function(e){var t=e[Q].task,a=e[Q].article,i=e[G].list,r=e[Q].step,n=e[Q].invoice;return{academicSec:i,article:a,invoice:n,step:r,task:t}},X=(r=B["a"].create(),r((s=function(e){function t(e){var a;return F()(this,t),a=J()(this,j()(t).call(this,e)),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var i={task:a.props.task,invoice:a.props.invoice};i.invoice.receipt_title=t.receipt_title,i.invoice.address=t.address,i.invoice.receiver=t.receiver,i.invoice.receipt_num=t.receipt_num,i.invoice.flag=1==a.state.isNeedInvoice?1:0,fetch("/task/fill",{method:"POST",body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){1!=e.result?C["a"].error("\u901a\u4fe1\u5931\u8d25"):L["a"].push("/author/result")})}})},a.onChange=function(e){a.setState({isNeedInvoice:e})},a.checkValue=function(e,t,i){a.state.isNeedInvoice&&!t&&i("\u8bf7\u8f93\u5165\u5fc5\u8981\u7684\u6570\u636e"),i()},a.state={isNeedInvoice:!0},a}return A()(t,e),x()(t,[{key:"render",value:function(){return V.a.createElement(B["a"],{layout:"horizontal",hideRequiredMark:!0},V.a.createElement(B["a"].Item,{label:"\u5ba1\u7a3f\u8d39\u91d1\u989d"},this.props.invoice.expense),V.a.createElement(B["a"].Item,{label:"\u662f\u5426\u9700\u8981\u53d1\u7968"},V.a.createElement(D["a"],{checked:this.state.isNeedInvoice,onChange:this.onChange})),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u62ac\u5934"},this.props.form.getFieldDecorator("receipt_title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53d1\u7968\u62ac\u5934"}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u62ac\u5934",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"},this.props.form.getFieldDecorator("receipt_num",{rules:[{validator:this.checkValue}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u5730\u5740"},this.props.form.getFieldDecorator("address",{rules:[{validator:this.checkValue}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u90ae\u5bc4\u5730\u5740",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u6536\u4ef6\u4eba"},this.props.form.getFieldDecorator("receiver",{rules:[{validator:this.checkValue},,]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u90ae\u5bc4\u6536\u4ef6\u4eba",disabled:!this.state.isNeedInvoice}))),V.a.createElement(N["a"],{type:"primary",onClick:this.onSubmit},"\u63d0\u4ea4"))}}]),t}(V.a.Component),n=s))||n),$=(l=B["a"].create(),l((c=function(e){function t(e){var a;return F()(this,t),a=J()(this,j()(t).call(this,e)),a.uploadFile1=function(e){e.preventDefault(),a.refs.uploadBox1.click()},a.uploadFile2=function(e){e.preventDefault(),a.refs.uploadBox2.click()},a.onFileChange1=function(e){var t=e.target.files[0];a.setState({file1:t,filename1:t?t.name:null})},a.onFileChange2=function(e){var t=e.target.files[0];a.setState({file2:t,filename2:t?t.name:null})},a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var i=a.props.task;i.content=null;var r=new FormData;if(!a.state.filename1)return void C["a"].error("\u8bf7\u4e0a\u4f20\u6587\u7ae0\u6587\u4ef6");var n={};n.task=i,a.state.filename2&&""!=a.state.filename2?(r.append("file1",a.state.file1),r.append("file2",a.state.file2),r.append("all",JSON.stringify(n))):(r.append("file1",a.state.file1),r.append("all",JSON.stringify(n))),fetch("/upload_allocate",{method:"POST",header:{"Content-Type":"multipart/form-data"},body:r}).then(function(e){return e.json()}).then(function(e){1==e.result?L["a"].push("/author/result"):C["a"].error("\u63d0\u4ea4\u9519\u8bef")})}})},a.state={file1:void 0,filename1:void 0,file2:void 0,filename2:void 0},a}return A()(t,e),x()(t,[{key:"render",value:function(){return V.a.createElement(B["a"],{layout:"vertical",hideRequiredMark:!0},V.a.createElement(B["a"].Item,{label:"\u63d0\u4ea4\u6587\u7ae0"},V.a.createElement(N["a"],{onClick:this.uploadFile1},"\u9009\u62e9\u6587\u4ef6")," ",V.a.createElement("br",null),this.state.filename1,V.a.createElement("input",{type:"file",id:"uploadFile1",name:"file1",onChange:this.onFileChange1,style:{display:"none"},ref:"uploadBox1"})),V.a.createElement(B["a"].Item,{label:"\u63d0\u4ea4\u9644\u4ef6"},V.a.createElement(N["a"],{onClick:this.uploadFile2},"\u9009\u62e9\u6587\u4ef6")," ",V.a.createElement("br",null),this.state.filename2,V.a.createElement("input",{type:"file",id:"uploadFile2",name:"file2",onChange:this.onFileChange2,style:{display:"none"},ref:"uploadBox2"})),V.a.createElement(N["a"],{type:"primary",onClick:this.onSubmit},"\u63d0\u4ea4"))}}]),t}(V.a.Component),o=c))||o),ee=(p=B["a"].create(),p((u=function(e){function t(){var e,a;F()(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return a=J()(this,(e=j()(t)).call.apply(e,[this].concat(r))),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var i=a.props.task;i.content="\u901a\u8fc7",fetch("/notice",{method:"POST",body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){1!=e.result?C["a"].error("\u63d0\u4ea4\u9519\u8bef"):L["a"].push("/referee/judgeresult")})}})},a.onDownloadClick=function(e){e.preventDefault(),window.open(a.props.task?"/download/id=".concat(a.props.task.id).concat("&type=0"):"")},a}return A()(t,e),x()(t,[{key:"render",value:function(){return V.a.createElement(B["a"],{layout:"vertical",hideRequiredMark:!0},V.a.createElement(B["a"].Item,{label:"\u6587\u7ae0\u5730\u5740"},V.a.createElement("a",{onClick:this.onDownloadClick},"\u4e0b\u8f7d\u6587\u7ae0")),V.a.createElement(N["a"],{type:"primary",onClick:this.onSubmit},"\u786e\u8ba4"))}}]),t}(V.a.Component),d=u))||d),te=(m=B["a"].create(),m((f=function(e){function t(e){var a;return F()(this,t),a=J()(this,j()(t).call(this,e)),a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var i={task:a.props.task,invoice:a.props.invoice};i.invoice.receipt_title=t.receipt_title,i.invoice.address=t.address,i.invoice.receiver=t.receiver,i.invoice.receipt_num=t.receipt_num,i.invoice.flag=1==a.state.isNeedInvoice?1:0,fetch("/task/fill",{method:"POST",body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){1!=e.result?C["a"].error("\u901a\u4fe1\u5931\u8d25"):L["a"].push("/author/result")})}})},a.onChange=function(e){a.setState({isNeedInvoice:e})},a.checkValue=function(e,t,i){a.state.isNeedInvoice&&!t&&i("\u8bf7\u8f93\u5165\u5fc5\u8981\u7684\u6570\u636e"),i()},a.state={isNeedInvoice:!0},a}return A()(t,e),x()(t,[{key:"render",value:function(){return V.a.createElement(B["a"],{layout:"horizontal",hideRequiredMark:!0},V.a.createElement(B["a"].Item,{label:"\u7248\u9762\u8d39\u91d1\u989d"},this.props.invoice.expense),V.a.createElement(B["a"].Item,{label:"\u662f\u5426\u9700\u8981\u53d1\u7968"},V.a.createElement(D["a"],{checked:this.state.isNeedInvoice,onChange:this.onChange})),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u62ac\u5934"},this.props.form.getFieldDecorator("receipt_title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53d1\u7968\u62ac\u5934"}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u62ac\u5934",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"},this.props.form.getFieldDecorator("receipt_num",{rules:[{validator:this.checkValue}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u5730\u5740"},this.props.form.getFieldDecorator("address",{rules:[{validator:this.checkValue}]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u90ae\u5bc4\u5730\u5740",disabled:!this.state.isNeedInvoice}))),V.a.createElement(B["a"].Item,{label:"\u53d1\u7968\u90ae\u5bc4\u6536\u4ef6\u4eba"},this.props.form.getFieldDecorator("receiver",{rules:[{validator:this.checkValue},,]})(V.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u90ae\u5bc4\u6536\u4ef6\u4eba",disabled:!this.state.isNeedInvoice}))),V.a.createElement(N["a"],{type:"primary",onClick:this.onSubmit},"\u63d0\u4ea4"))}}]),t}(V.a.Component),h=f))||h),ae=(v=Object(z["connect"])(U,null),v((k=function(e){function t(){var e,a;F()(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return a=J()(this,(e=j()(t)).call.apply(e,[this].concat(n))),a.getWriterName=function(e){var t=e;if(!e)return"";for(var a="",r=0;r<t.length-1;r++)a=a.concat(t[r].name.concat(", "));return a=a.concat(t[i].name),a},a.getOperation=function(){return a.state.step?2==a.state.step?V.a.createElement(X,{task:a.props.task,invoice:a.props.invoice}):5==a.state.step?V.a.createElement($,{task:a.props.task}):8==a.state.step?V.a.createElement(ee,{task:a.props.task}):9==a.state.step?V.a.createElement(te,{task:a.props.task,invoice:a.props.invoice}):null:null},a}return A()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"".concat(G,"/queryList")});var e=R()(this.props.task?this.props.task.date:void 0).add(30,"days");this.setState({task:this.props.task,article:this.props.article,targetTime:e})}},{key:"render",value:function(){var e=this.state?V.a.createElement(K["a"],{className:Z.a.headerList,size:"small",col:"2"},V.a.createElement(K["a"].Description,{term:"\u4f5c\u8005"},this.getWriterName(this.state.article?this.state.article.writers_info:"")),V.a.createElement(K["a"].Description,{term:"\u5b66\u672f\u9886\u57df"},this.translateAcademicSec(this.state.article?this.state.article.academicsec:0)),V.a.createElement(K["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u4e2d\u6587\uff09"},this.state.article?this.state.article.keyword1_ch:"","\u3001",this.state.article?this.state.article.keyword2_ch:"N/A","\u3001",this.state.article?this.state.article.keyword3_ch:"N/A","\u3001",this.state.article?this.state.article.keyword4_ch:"N/A"),V.a.createElement(K["a"].Description,{term:"\u5173\u952e\u8bcd\uff08\u82f1\u6587\uff09"},this.state.article?this.state.article.keyword1_en:"","\u3001",this.state.article?this.state.article.keyword2_en:"N/A","\u3001",this.state.article?this.state.article.keyword3_en:"N/A","\u3001",this.state.article?this.state.article.keyword4_ch:"N/A"),V.a.createElement(K["a"].Description,{term:"\u6458\u8981\uff08\u4e2d\u6587\uff09"},this.state.article?this.state.article.summary_ch:""),V.a.createElement(K["a"].Description,{term:"\u6458\u8981\uff08\u82f1\u6587"},this.state.article?this.state.article.summary_en:"")):null,t=this.state?V.a.createElement(b["a"],null,V.a.createElement(S["a"],{xs:24,sm:12},V.a.createElement("div",{className:Z.a.textSecondary},"\u72b6\u6001"),V.a.createElement("div",{className:Z.a.heading},"\u5f85\u5ba1\u7a3f")),V.a.createElement(S["a"],{xs:24,sm:12},V.a.createElement("div",{className:Z.a.textSecondary},"\u8ddd\u79bb\u622a\u6b62\u65f6\u95f4"),V.a.createElement("div",{className:Z.a.heading},V.a.createElement(W["a"],{target:this.state.targetTime})))):null;return V.a.createElement(Y["a"],{title:"\u6587\u7ae0\u6807\u9898\uff1a".concat(this.state.article?this.state.article.title:""),logo:V.a.createElement("img",{alt:"",src:"https://gw.alipayobjects.com/zos/rmsportal/nxkuOJlFJuAUhzlMTCEe.png"}),content:e,extraContent:t},V.a.createElement(g["a"],{title:"\u6d41\u7a0b\u8fdb\u5ea6",style:{marginBottom:24},bordered:!1},V.a.createElement(y["a"],{progressDot:!0,direction:"horizontal",current:this.state.step?this.state.step:0},V.a.createElement(y["a"].Step,{title:"\u63d0\u4ea4\u7a3f\u4ef6",description:"\u7a3f\u4ef6\u63d0\u4ea4\u5b8c\u6bd5"}),V.a.createElement(y["a"].Step,{title:"\u7f16\u8f91\u521d\u5ba1",description:"\u7f16\u8f91\u5bf9\u7a3f\u4ef6\u8fdb\u884c\u521d\u5ba1"}),V.a.createElement(y["a"].Step,{title:"\u7f34\u7eb3\u5ba1\u7a3f\u8d39",description:"\u901a\u8fc7\u521d\u5ba1\u7684\u7a3f\u4ef6\u7f34\u7eb3\u5ba1\u7a3f\u8d39"}),V.a.createElement(y["a"].Step,{title:"\u5ba1\u7a3f\u4e2d",description:"\u7f16\u8f91\u90e8\u53ca\u5ba1\u7a3f\u4eba\u5728\u5bf9\u60a8\u7684\u7a3f\u4ef6\u8fdb\u884c\u5ba1\u9605"}),V.a.createElement(y["a"].Step,{title:"\u5ba1\u7a3f\u7ed3\u8bba\u53cd\u9988",description:"\u7f16\u8f91\u90e8\u5df2\u53cd\u9988\u5ba1\u7a3f\u610f\u89c1"}),V.a.createElement(y["a"].Step,{title:"\u4fee\u6539",description:"\u6839\u636e\u5ba1\u7a3f\u610f\u89c1\u8fdb\u884c\u4fee\u6539"}),V.a.createElement(y["a"].Step,{title:"\u4e8c\u6b21\u5ba1\u9605",description:"\u7f16\u8f91\u90e8\u53ca\u5ba1\u7a3f\u4eba\u5728\u5bf9\u60a8\u7684\u7a3f\u4ef6\u8fdb\u884c\u5ba1\u9605"}),V.a.createElement(y["a"].Step,{title:"\u5ba1\u7a3f\u7ed3\u8bba\u53cd\u9988",description:"\u7f16\u8f91\u90e8\u5df2\u53cd\u9988\u5ba1\u7a3f\u610f\u89c1"}),V.a.createElement(y["a"].Step,{title:"\u5f85\u786e\u8ba4\u4fee\u6539",description:"\u5f85\u786e\u8ba4\u7f16\u8f91\u7684\u683c\u5f0f\u4fee\u6539"}),V.a.createElement(y["a"].Step,{title:"\u7f34\u7eb3\u7248\u9762\u8d39",description:"\u5bf9\u6700\u7ec8\u7a3f\u4ef6\u7f34\u7eb3\u7248\u9762\u8d39"}),V.a.createElement(y["a"].Step,{title:"\u5b8c\u6210",description:"\u6d41\u7a0b\u5df2\u5b8c\u6210"}))),V.a.createElement(g["a"],{title:"\u64cd\u4f5c",style:{marginBottom:24},bordered:!1},this.getOperation()))}}]),t}(V.a.Component),E=k))||E);t["default"]=ae},tpv8:function(e,t,a){e.exports={headerList:"antd-pro-pages-author-task-detail-headerList",tabsCard:"antd-pro-pages-author-task-detail-tabsCard",noData:"antd-pro-pages-author-task-detail-noData",heading:"antd-pro-pages-author-task-detail-heading",stepDescription:"antd-pro-pages-author-task-detail-stepDescription",textSecondary:"antd-pro-pages-author-task-detail-textSecondary"}}}]);